!function(){function e(){return e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},e.apply(null,arguments)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function r(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */r=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof w?t:w,o=Object.create(i.prototype),s=new O(r||[]);return a(o,"_invoke",{value:A(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",v="suspendedYield",g="executing",y="completed",m={};function w(){}function k(){}function b(){}var _={};l(_,s,(function(){return this}));var E=Object.getPrototypeOf,T=E&&E(E(P([])));T&&T!==n&&i.call(T,s)&&(_=T);var I=b.prototype=w.prototype=Object.create(_);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(r,a,o,s){var u=d(e[r],e,a);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==h(l)&&i.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var r;a(this,"_invoke",{value:function(e,i){function a(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(a,a):a()}})}function A(t,n,r){var i=p;return function(a,o){if(i===g)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=C(s,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?y:v,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=y,r.method="throw",r.arg=c.arg)}}}function C(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(h(t)+" is not iterable")}return k.prototype=b,a(I,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:k,configurable:!0}),k.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},x(S.prototype),l(S.prototype,u,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new S(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(I),l(I,c,"Generator"),l(I,s,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function i(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)}))}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e,t,n){return t=m(t),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function p(e){var t="function"==typeof Map?new Map:void 0;return p=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return v(e,arguments,m(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},p(e)}function v(e,t,n){if(g())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&y(i,n.prototype),i}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function b(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e,t,n){return(t=E(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}System.register(["./index.ksa-legacy-CBkY3vjZ.js"],(function(t,a){"use strict";var c,l,g,y,k,E,T,I,x,S,A,C,D;return{setters:[function(e){e.T,c=e.U,l=e.i,g=e.r,y=e.V,k=e.d,E=e.v,T=e.K,I=e.W,x=e.c,S=e.o,A=e.D,C=e.O,D=e.k}],execute:function(){var t,N,O,P,M,L,R=document.createElement("style");R.textContent="html.webp .show{background-image:url("+new URL("page-show-CtzET8Vy.webp",a.meta.url).href+")}html.avif .show{background-image:url("+new URL("page-show-C6icNM4s.avif",a.meta.url).href+")}.show{position:relative;width:750px;height:1548px;background-image:url("+new URL("page-show-BQwjdRjE.png",a.meta.url).href+");display:flex;justify-content:center;padding-top:400px}.show .flex-wrap{display:flex;align-items:center;justify-content:center;width:548px;height:348px}.show .text{color:#df3f00;text-align:right;font-family:Tajawal-400;font-size:27px;line-height:52px;padding-top:0;padding-right:40px;padding-left:12px}.show .text .highlight{font-family:Tajawal-700;font-size:42px}html.webp .download-wrap{background-image:url("+new URL("download-wrap-BxRK8mNP.webp",a.meta.url).href+")}html.avif .download-wrap{background-image:url("+new URL("download-wrap-DAdSOgAg.avif",a.meta.url).href+")}.download-wrap{position:fixed;bottom:0;left:0;width:750px;height:334px;background-image:url("+new URL("download-wrap-BIXO9_4s.png",a.meta.url).href+");display:flex;justify-content:center;padding-top:150px}.download-wrap .download-btn{width:612px;height:131px}\n",document.head.appendChild(R);var F=(t=function(){function e(){w(this,e),_(this,"enable",!0),_(this,"_log",void 0),_(this,"_trace",void 0),_(this,"_warn",void 0),_(this,"_error",void 0),_(this,"_table",void 0)}return b(e,[{key:"setEnable",value:function(e){this.enable=e,this.enable?(console.log=console.log,console.trace=console.trace,console.warn=console.warn,console.error=console.error,console.table=console.table):(console.log=function(){},console.trace=function(){},console.warn=function(){},console.error=function(){},console.table=function(){})}},{key:"getEnable",value:function(){return this.enable}},{key:"log",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).log.apply(t,[e].concat(r))}},{key:"trace",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).trace.apply(t,[e].concat(r))}},{key:"warn",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).warn.apply(t,[e].concat(r))}},{key:"error",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).error.apply(t,[e].concat(r))}},{key:"table",value:function(){var e;(e=console).table.apply(e,arguments)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}])}(),_(t,"instance",void 0),t),U=F.getInstance(),V={VUE_APP_ENV:"production",VUE_APP_BASE_URL:"https://arab-pk.badambiz.com/",VUE_APP_ENABLE_FONT_SPTU:"true",VUE_APP_LANGUAGE:"阿拉伯语",VUE_APP_PUBLIC_PATH:"./",VUE_APP_TRANSLATE_SHEET:"2512sawa挑战赛2.0",VUE_APP_ENABLE_SPTU:"true",VUE_APP_EXTERNALS:"",VUE_APP_FLAVOR:"",VUE_APP_VERSION:"0.0.0"},j=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},B={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(j(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new z;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},z=function(e){function t(){var e;return w(this,t),(e=f(this,t,arguments)).name="DecodeBase64StringError",e}return d(t,e),b(t)}(p(Error)),q=function(e){return function(e){var t=j(e);return B.encodeByteArray(t,!0)}(e).replace(/\./g,"")};
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
var K=function(){
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},H=function(){if("undefined"!=typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&function(e){try{return B.decodeString(e,!0)}catch(n){console.error("base64Decode failed: ",n)}return null}(e[1]);return t&&JSON.parse(t)}},G=function(){try{return K()||function(){if("undefined"!=typeof process&&void 0!==V){var e=V.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||H()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},$=function(e){var t=function(e){var t,n;return null===(n=null===(t=G())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},W=function(){var e;return null===(e=G())||void 0===e?void 0:e.config},Q=function(){return b((function e(){var t=this;w(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}),[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}])}();function Y(){try{return"object"===("undefined"==typeof indexedDB?"undefined":h(indexedDB))}catch(e){return!1}}function X(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}}))}function J(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Z=function(e){function t(e,n,r){var i;return w(this,t),(i=f(this,t,[n])).code=e,i.customData=r,i.name="FirebaseError",Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,ee.prototype.create),i}return d(t,e),b(t)}(p(Error)),ee=function(){return b((function e(t,n,r){w(this,e),this.service=t,this.serviceName=n,this.errors=r}),[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(te,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Z(n,a,t)}}])}();var te=/\{\$([^}]+)}/g;function ne(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(re(s)&&re(u)){if(!ne(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function re(e){return null!==e&&"object"===h(e)}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var ie=1e3,ae=2,oe=144e5,se=.5;function ue(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ae,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie)*Math.pow(t,e),r=Math.round(se*n*(Math.random()-.5)*2);return Math.min(oe,n+r)}
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function ce(e){return e&&e._delegate?e._delegate:e}var le=function(){return b((function e(t,n,r){w(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}),[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}])}(),he="[DEFAULT]",fe=function(){return b((function e(t,n){w(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}),[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Q;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e))try{this.getOrInitializeService({instanceIdentifier:he})}catch(l){}var t,n=u(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch(l){}}}catch(h){n.e(h)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:(e=o(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(i(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),i(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=u(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var c=s(i.value,2),l=c[0],h=c[1];r===this.normalizeInstanceIdentifier(l)&&h.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=u(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===he?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he;return this.component?this.component.multipleInstances?e:he:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]);var e}();
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var de,pe=function(){return b((function e(t){w(this,e),this.name=t,this.providers=new Map}),[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new fe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}])}();
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(de||(de={}));var ve,ge,ye={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},me=de.INFO,we=_(_(_(_(_({},de.DEBUG,"log"),de.VERBOSE,"log"),de.INFO,"info"),de.WARN,"warn"),de.ERROR,"error"),ke=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=we[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},be=function(){return b((function e(t){w(this,e),this.name=t,this._logLevel=me,this._logHandler=ke,this._userLogHandler=null}),[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in de))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?ye[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.DEBUG].concat(t)),this._logHandler.apply(this,[this,de.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.VERBOSE].concat(t)),this._logHandler.apply(this,[this,de.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.INFO].concat(t)),this._logHandler.apply(this,[this,de.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.WARN].concat(t)),this._logHandler.apply(this,[this,de.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.ERROR].concat(t)),this._logHandler.apply(this,[this,de.ERROR].concat(t))}}])}(),_e=function(e,t){return t.some((function(t){return e instanceof t}))};var Ee=new WeakMap,Te=new WeakMap,Ie=new WeakMap,xe=new WeakMap,Se=new WeakMap;var Ae={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Te.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ie.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ne(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ce(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Oe(this),n),Ne(Ee.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ne(e.apply(Oe(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Oe(this),t].concat(r));return Ie.set(a,t.sort?t.sort():[t]),Ne(a)}}function De(e){return"function"==typeof e?Ce(e):(e instanceof IDBTransaction&&function(e){if(!Te.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Te.set(e,t)}}(e),_e(e,ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ae):e)}function Ne(e){if(e instanceof IDBRequest)return t=e,(n=new Promise((function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(Ne(t.result)),r()},a=function(){n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)}))).then((function(e){e instanceof IDBCursor&&Ee.set(e,t)})).catch((function(){})),Se.set(n,t),n;var t,n;if(xe.has(e))return xe.get(e);var r=De(e);return r!==e&&(xe.set(e,r),Se.set(r,e)),r}var Oe=function(e){return Se.get(e)};var Pe=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],Le=new Map;function Re(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(Le.get(t))return Le.get(t);var n=t.replace(/FromIndex$/,""),i=t!==n,a=Me.includes(n);if(n in(i?IDBIndex:IDBObjectStore).prototype&&(a||Pe.includes(n))){var s=function(){var e=o(r().mark((function e(t){var o,s,u,c,l,h,f=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=this.transaction(t,a?"readwrite":"readonly"),u=s.store,c=f.length,l=new Array(c>1?c-1:0),h=1;h<c;h++)l[h-1]=f[h];return i&&(u=u.index(l.shift())),e.next=6,Promise.all([(o=u)[n].apply(o,l),a&&s.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Le.set(t,s),s}}}Ae=function(e){return n(n({},e),{},{get:function(t,n,r){return Re(t,n)||e.get(t,n,r)},has:function(t,n){return!!Re(t,n)||e.has(t,n)}})}(Ae);
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
var Fe=function(){return b((function e(t){w(this,e),this.container=t}),[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}])}();var Ue="@firebase/app",Ve="0.9.19",je=new be("@firebase/app"),Be="[DEFAULT]",ze=(_(_(_(_(_(_(_(_(_(_(N={},Ue,"fire-core"),"@firebase/app-compat","fire-core-compat"),"@firebase/analytics","fire-analytics"),"@firebase/analytics-compat","fire-analytics-compat"),"@firebase/app-check","fire-app-check"),"@firebase/app-check-compat","fire-app-check-compat"),"@firebase/auth","fire-auth"),"@firebase/auth-compat","fire-auth-compat"),"@firebase/database","fire-rtdb"),"@firebase/database-compat","fire-rtdb-compat"),_(_(_(_(_(_(_(_(_(_(N,"@firebase/functions","fire-fn"),"@firebase/functions-compat","fire-fn-compat"),"@firebase/installations","fire-iid"),"@firebase/installations-compat","fire-iid-compat"),"@firebase/messaging","fire-fcm"),"@firebase/messaging-compat","fire-fcm-compat"),"@firebase/performance","fire-perf"),"@firebase/performance-compat","fire-perf-compat"),"@firebase/remote-config","fire-rc"),"@firebase/remote-config-compat","fire-rc-compat"),_(_(_(_(_(_(N,"@firebase/storage","fire-gcs"),"@firebase/storage-compat","fire-gcs-compat"),"@firebase/firestore","fire-fst"),"@firebase/firestore-compat","fire-fst-compat"),"fire-js","fire-js"),"firebase","fire-js-all")),qe=new Map,Ke=new Map;function He(e,t){try{e.container.addComponent(t)}catch(n){je.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ge(e){var t=e.name;if(Ke.has(t))return je.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ke.set(t,e);var n,r=u(qe.values());try{for(r.s();!(n=r.n()).done;){He(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function $e(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var We=(_(_(_(_(_(_(_(_(_(_(O={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),"bad-app-name","Illegal App name: '{$appName}"),"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),"app-deleted","Firebase App named '{$appName}' already deleted"),"no-options","Need to provide options, when not being deployed to hosting via source."),"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),"invalid-log-argument","First argument to `onLog` must be null or a function."),"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),_(O,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.")),Qe=new ee("app","Firebase",We),Ye=function(){return b((function e(t,n,r){var i=this;w(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new le("app",(function(){return i}),"PUBLIC"))}),[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Qe.create("app-deleted",{appName:this._name})}}])}(),Xe="10.4.0";function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==h(t)&&(t={name:t});var r=Object.assign({name:Be,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw Qe.create("bad-app-name",{appName:String(i)});if(n||(n=W()),!n)throw Qe.create("no-options");var a=qe.get(i);if(a){if(ne(n,a.options)&&ne(r,a.config))return a;throw Qe.create("duplicate-app",{appName:i})}var o,s=new pe(i),c=u(Ke.values());try{for(c.s();!(o=c.n()).done;){var l=o.value;s.addComponent(l)}}catch(d){c.e(d)}finally{c.f()}var f=new Ye(n,r,s);return qe.set(i,f),f}function Ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=qe.get(e);if(!t&&e===Be&&W())return Je();if(!t)throw Qe.create("no-app",{appName:e});return t}function et(e,t,n){var r,i=null!==(r=ze[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void je.warn(s.join(" "))}Ge(new le("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var tt="firebase-heartbeat-database",nt=1,rt="firebase-heartbeat-store",it=null;function at(){return it||(it=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Ne(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Ne(s.result),e.oldVersion,e.newVersion,Ne(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(tt,nt,{upgrade:function(e,t){if(0===t)e.createObjectStore(rt)}}).catch((function(e){throw Qe.create("idb-open",{originalErrorMessage:e.message})}))),it}function ot(e){return st.apply(this,arguments)}function st(){return(st=o(r().mark((function e(t){var n,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at();case 3:return n=e.sent,e.next=6,n.transaction(rt).objectStore(rt).get(lt(t));case 6:return i=e.sent,e.abrupt("return",i);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Z?je.warn(e.t0.message):(a=Qe.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),je.warn(a.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function ut(e,t){return ct.apply(this,arguments)}function ct(){return(ct=o(r().mark((function e(t,n){var i,a,o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at();case 3:return i=e.sent,a=i.transaction(rt,"readwrite"),o=a.objectStore(rt),e.next=8,o.put(n,lt(t));case 8:return e.next=10,a.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Z?je.warn(e.t0.message):(s=Qe.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),je.warn(s.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function lt(e){return"".concat(e.name,"!").concat(e.options.appId)}
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var ht=function(){return b((function e(t){var n=this;w(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new vt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}),[{key:"triggerHeartbeat",value:(t=o(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),i=ft(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===i}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:i,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getHeartbeatsHeader",value:(e=o(r().mark((function e(){var t,n,i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ft(),n=dt(this._heartbeatsCache.heartbeats),i=n.heartbeatsToSend,a=n.unsentEntries,o=q(JSON.stringify({version:2,heartbeats:i})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t}();function ft(){return(new Date).toISOString().substring(0,10)}function dt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=u(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),gt(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),gt(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var pt,vt=function(){return b((function e(t){w(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}),[{key:"runIndexedDBEnvironmentCheck",value:(a=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",X().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"read",value:(n=o(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ot(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"overwrite",value:(t=o(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return i=e.sent,e.abrupt("return",ut(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"add",value:(e=o(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return a=e.sent,e.abrupt("return",ut(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:a.lastSentHeartbeatDate,heartbeats:[].concat(i(a.heartbeats),i(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}]);var e,t,n,a}();function gt(e){return q(JSON.stringify({version:2,heartbeats:e})).length}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */pt="",Ge(new le("platform-logger",(function(e){return new Fe(e)}),"PRIVATE")),Ge(new le("heartbeat",(function(e){return new ht(e)}),"PRIVATE")),et(Ue,Ve,pt),et(Ue,Ve,"esm2017"),et("fire-js","");
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
et("firebase","10.4.0","app");var yt,mt,wt=function(e,t){return t.some((function(t){return e instanceof t}))};var kt=new WeakMap,bt=new WeakMap,_t=new WeakMap,Et=new WeakMap,Tt=new WeakMap;var It={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return bt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||_t.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return At(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function xt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(mt||(mt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ct(this),n),At(kt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return At(e.apply(Ct(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ct(this),t].concat(r));return _t.set(a,t.sort?t.sort():[t]),At(a)}}function St(e){return"function"==typeof e?xt(e):(e instanceof IDBTransaction&&function(e){if(!bt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));bt.set(e,t)}}(e),wt(e,yt||(yt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,It):e)}function At(e){if(e instanceof IDBRequest)return t=e,(n=new Promise((function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(At(t.result)),r()},a=function(){n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)}))).then((function(e){e instanceof IDBCursor&&kt.set(e,t)})).catch((function(){})),Tt.set(n,t),n;var t,n;if(Et.has(e))return Et.get(e);var r=St(e);return r!==e&&(Et.set(e,r),Tt.set(r,e)),r}var Ct=function(e){return Tt.get(e)};var Dt=["get","getKey","getAll","getAllKeys","count"],Nt=["put","add","delete","clear"],Ot=new Map;function Pt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(Ot.get(t))return Ot.get(t);var n=t.replace(/FromIndex$/,""),i=t!==n,a=Nt.includes(n);if(n in(i?IDBIndex:IDBObjectStore).prototype&&(a||Dt.includes(n))){var s=function(){var e=o(r().mark((function e(t){var o,s,u,c,l,h,f=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=this.transaction(t,a?"readwrite":"readonly"),u=s.store,c=f.length,l=new Array(c>1?c-1:0),h=1;h<c;h++)l[h-1]=f[h];return i&&(u=u.index(l.shift())),e.next=6,Promise.all([(o=u)[n].apply(o,l),a&&s.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ot.set(t,s),s}}}!function(e){It=e(It)}((function(e){return n(n({},e),{},{get:function(t,n,r){return Pt(t,n)||e.get(t,n,r)},has:function(t,n){return!!Pt(t,n)||e.has(t,n)}})}));var Mt="@firebase/installations",Lt="0.6.4",Rt=1e4,Ft="w:".concat(Lt),Ut="FIS_v2",Vt="https://firebaseinstallations.googleapis.com/v1",jt=36e5,Bt=_(_(_(_(_(_({},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),"not-registered","Firebase Installation is not registered."),"installation-not-found","Firebase Installation not found."),"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),"app-offline","Could not process request. Application offline."),"delete-pending-registration","Can't delete installation while there is a pending registration request."),zt=new ee("installations","Installations",Bt);function qt(e){return e instanceof Z&&e.code.includes("request-failed")}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Kt(e){var t=e.projectId;return"".concat(Vt,"/projects/").concat(t,"/installations")}function Ht(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function Gt(e,t){return $t.apply(this,arguments)}function $t(){return($t=o(r().mark((function e(t,n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return i=e.sent,a=i.error,e.abrupt("return",zt.create("request-failed",{requestName:t,serverCode:a.code,serverMessage:a.message,serverStatus:a.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wt(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Qt(e,t){var n=t.refreshToken,r=Wt(e);return r.append("Authorization",function(e){return"".concat(Ut," ").concat(e)}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(n)),r}function Yt(e){return Xt.apply(this,arguments)}function Xt(){return(Xt=o(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(e,t){return Zt.apply(this,arguments)}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Zt(){return(Zt=o(r().mark((function e(t,n){var i,a,o,s,u,c,l,h,f,d,p,v;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.appConfig,a=t.heartbeatServiceProvider,o=n.fid,s=Kt(i),u=Wt(i),!(c=a.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,c.getHeartbeatsHeader();case 8:(l=e.sent)&&u.append("x-firebase-client",l);case 10:return h={fid:o,authVersion:Ut,appId:i.appId,sdkVersion:Ft},f={method:"POST",headers:u,body:JSON.stringify(h)},e.next=14,Yt((function(){return fetch(s,f)}));case 14:if(!(d=e.sent).ok){e.next=23;break}return e.next=18,d.json();case 18:return p=e.sent,v={fid:p.fid||o,registrationStatus:2,refreshToken:p.refreshToken,authToken:Ht(p.authToken)},e.abrupt("return",v);case 23:return e.next=25,Gt("Create Installation",d);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function en(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
var tn=/^[cdef][\w-]{21}$/,nn="";function rn(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){var t=(n=e,btoa(String.fromCharCode.apply(String,i(n))).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e);return tn.test(t)?t:nn}catch(n){return nn}}function an(e){return"".concat(e.appName,"!").concat(e.appId)}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var on=new Map;function sn(e,t){var n=an(e);un(n,t),function(e,t){var n=function(){!cn&&"BroadcastChannel"in self&&((cn=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){un(e.data.key,e.data.fid)});return cn}();n&&n.postMessage({key:e,fid:t});0===on.size&&cn&&(cn.close(),cn=null)}(n,t)}function un(e,t){var n=on.get(e);if(n){var r,i=u(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var cn=null;
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
var ln="firebase-installations-database",hn=1,fn="firebase-installations-store",dn=null;function pn(){return dn||(dn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=At(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(At(s.result),e.oldVersion,e.newVersion,At(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}(ln,hn,{upgrade:function(e,t){if(0===t)e.createObjectStore(fn)}})),dn}function vn(e,t){return gn.apply(this,arguments)}function gn(){return gn=o(r().mark((function e(t,n){var i,a,o,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=an(t),e.next=3,pn();case 3:return a=e.sent,o=a.transaction(fn,"readwrite"),s=o.objectStore(fn),e.next=8,s.get(i);case 8:return u=e.sent,e.next=11,s.put(n,i);case 11:return e.next=13,o.done;case 13:return u&&u.fid===n.fid||sn(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),gn.apply(this,arguments)}function yn(e){return mn.apply(this,arguments)}function mn(){return mn=o(r().mark((function e(t){var n,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=an(t),e.next=3,pn();case 3:return i=e.sent,a=i.transaction(fn,"readwrite"),e.next=7,a.objectStore(fn).delete(n);case 7:return e.next=9,a.done;case 9:case"end":return e.stop()}}),e)}))),mn.apply(this,arguments)}function wn(e,t){return kn.apply(this,arguments)}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function kn(){return kn=o(r().mark((function e(t,n){var i,a,o,s,u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=an(t),e.next=3,pn();case 3:return a=e.sent,o=a.transaction(fn,"readwrite"),s=o.objectStore(fn),e.next=8,s.get(i);case 8:if(u=e.sent,void 0!==(c=n(u))){e.next=15;break}return e.next=13,s.delete(i);case 13:e.next=17;break;case 15:return e.next=17,s.put(c,i);case 17:return e.next=19,o.done;case 19:return!c||u&&u.fid===c.fid||sn(t,c.fid),e.abrupt("return",c);case 21:case"end":return e.stop()}}),e)}))),kn.apply(this,arguments)}function bn(e){return _n.apply(this,arguments)}function _n(){return(_n=o(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(t.appConfig,(function(e){var r=En(e),i=Tn(t,r);return n=i.registrationPromise,i.installationEntry}));case 2:if((i=e.sent).fid!==nn){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:i,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function En(e){return Cn(e||{fid:rn(),registrationStatus:0})}function Tn(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(zt.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return In.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:xn(e)}:{installationEntry:t}}function In(){return(In=o(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt(t,n);case 3:return i=e.sent,e.abrupt("return",vn(t.appConfig,i));case 7:if(e.prev=7,e.t0=e.catch(0),!qt(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,yn(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,vn(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function xn(e){return Sn.apply(this,arguments)}function Sn(){return(Sn=o(r().mark((function e(t){var n,i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,en(100);case 6:return e.next=8,An(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,bn(t);case 14:if(i=e.sent,a=i.installationEntry,!(o=i.registrationPromise)){e.next=21;break}return e.abrupt("return",o);case 21:return e.abrupt("return",a);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function An(e){return wn(e,(function(e){if(!e)throw zt.create("installation-not-found");return Cn(e)}))}function Cn(e){return 1===(t=e).registrationStatus&&t.registrationTime+Rt<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}function Dn(e,t){return Nn.apply(this,arguments)}function Nn(){return(Nn=o(r().mark((function e(t,n){var i,a,o,s,u,c,l,h,f,d,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.appConfig,a=t.heartbeatServiceProvider,o=On(i,n),s=Qt(i,n),!(u=a.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(c=e.sent)&&s.append("x-firebase-client",c);case 9:return l={installation:{sdkVersion:Ft,appId:i.appId}},h={method:"POST",headers:s,body:JSON.stringify(l)},e.next=13,Yt((function(){return fetch(o,h)}));case 13:if(!(f=e.sent).ok){e.next=22;break}return e.next=17,f.json();case 17:return d=e.sent,p=Ht(d),e.abrupt("return",p);case 22:return e.next=24,Gt("Generate Auth Token",f);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function On(e,t){var n=t.fid;return"".concat(Kt(e),"/").concat(n,"/authTokens:generate")}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Pn(e){return Mn.apply(this,arguments)}function Mn(){return Mn=o(r().mark((function e(t){var n,i,a,o,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],e.next=3,wn(t.appConfig,(function(e){if(!jn(e))throw zt.create("not-registered");var r=e.authToken;if(!n&&Bn(r))return e;if(1===r.requestStatus)return i=Ln(t,n),e;if(!navigator.onLine)throw zt.create("app-offline");var a=zn(e);return i=Un(t,a),a}));case 3:if(a=e.sent,!i){e.next=10;break}return e.next=7,i;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=a.authToken;case 11:return o=e.t0,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),Mn.apply(this,arguments)}function Ln(e,t){return Rn.apply(this,arguments)}function Rn(){return(Rn=o(r().mark((function e(t,n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn(t.appConfig);case 2:i=e.sent;case 3:if(1!==i.authToken.requestStatus){e.next=11;break}return e.next=6,en(100);case 6:return e.next=8,Fn(t.appConfig);case 8:i=e.sent,e.next=3;break;case 11:if(0!==(a=i.authToken).requestStatus){e.next=16;break}return e.abrupt("return",Pn(t,n));case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fn(e){return wn(e,(function(e){if(!jn(e))throw zt.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+Rt<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function Un(e,t){return Vn.apply(this,arguments)}function Vn(){return(Vn=o(r().mark((function e(t,n){var i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dn(t,n);case 3:return i=e.sent,a=Object.assign(Object.assign({},n),{authToken:i}),e.next=7,vn(t.appConfig,a);case 7:return e.abrupt("return",i);case 10:if(e.prev=10,e.t0=e.catch(0),!qt(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,yn(t.appConfig);case 15:e.next=20;break;case 17:return o=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,vn(t.appConfig,o);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function jn(e){return void 0!==e&&2===e.registrationStatus}function Bn(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+jt}(e)}function zn(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function qn(){return(qn=o(r().mark((function e(t){var n,i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,bn(n);case 3:return i=e.sent,a=i.installationEntry,(o=i.registrationPromise)?o.catch(console.error):Pn(n).catch(console.error),e.abrupt("return",a.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kn(){return Kn=o(r().mark((function e(t){var n,i,a,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],i=t,e.next=4,Hn(i);case 4:return e.next=6,Pn(i,n);case 6:return a=e.sent,e.abrupt("return",a.token);case 8:case"end":return e.stop()}}),e)}))),Kn.apply(this,arguments)}function Hn(e){return Gn.apply(this,arguments)}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Gn(){return(Gn=o(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn(t);case 2:if(n=e.sent,!(i=n.registrationPromise)){e.next=7;break}return e.next=7,i;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $n(e){return zt.create("missing-app-config-values",{valueName:e})}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Wn="installations",Qn=function(e){var t=$e(e.getProvider("app").getImmediate(),Wn).getImmediate(),n={getId:function(){
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */return function(e){return qn.apply(this,arguments)}(t)},getToken:function(e){return function(e){return Kn.apply(this,arguments)}(t,e)}};return n};Ge(new le(Wn,(function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw $n("App Configuration");if(!e.name)throw $n("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw $n(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:$e(t,"heartbeat"),_delete:function(){return Promise.resolve()}}}),"PUBLIC")),Ge(new le("installations-internal",Qn,"PRIVATE")),et(Mt,Lt),et(Mt,Lt,"esm2017");
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
var Yn="analytics",Xn="firebase_id",Jn="origin",Zn=6e4,er="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tr="https://www.googletagmanager.com/gtag/js",nr=new be("@firebase/analytics"),rr=(_(_(_(_(_(_(_(_(_(_(P={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),_(_(P,"no-client-id",'The "client_id" field is empty.'),"invalid-gtag-resource","Trusted Types detected an invalid gtag resource: {$gtagURL}.")),ir=new ee("analytics","Analytics",rr);
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function ar(e){if(!e.startsWith(tr)){var t=ir.create("invalid-gtag-resource",{gtagURL:e});return nr.warn(t.message),""}return e}function or(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function sr(e,t){var n=function(e,t){var n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:ar}),r=document.createElement("script"),i="".concat(tr,"?l=").concat(e,"&id=").concat(t);r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ur(e,t,n,r,i,a){return cr.apply(this,arguments)}function cr(){return cr=o(r().mark((function e(t,n,i,a,o,s){var u,c,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=a[o],e.prev=1,!u){e.next=7;break}return e.next=5,n[u];case 5:e.next=14;break;case 7:return e.next=9,or(i);case 9:if(c=e.sent,!(l=c.find((function(e){return e.measurementId===o})))){e.next=14;break}return e.next=14,n[l.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),nr.error(e.t0);case 19:t("config",o,s);case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),cr.apply(this,arguments)}function lr(e,t,n,r,i){return hr.apply(this,arguments)}function hr(){return hr=o(r().mark((function e(t,n,i,a,o){var s,c,l,h,f,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=[],!o||!o.send_to){e.next=26;break}return c=o.send_to,Array.isArray(c)||(c=[c]),e.next=7,or(i);case 7:l=e.sent,h=u(c),e.prev=9,d=r().mark((function e(){var t,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,i=l.find((function(e){return e.measurementId===t})),!(a=i&&n[i.appId])){e.next=7;break}s.push(a),e.next=9;break;case 7:return s=[],e.abrupt("return",1);case 9:case"end":return e.stop()}}),e)})),h.s();case 12:if((f=h.n()).done){e.next=18;break}return e.delegateYield(d(),"t0",14);case 14:if(!e.t0){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(9),h.e(e.t1);case 23:return e.prev=23,h.f(),e.finish(23);case 26:return 0===s.length&&(s=Object.values(n)),e.next=29,Promise.all(s);case 29:t("event",a,o||{}),e.next=35;break;case 32:e.prev=32,e.t2=e.catch(0),nr.error(e.t2);case 35:case"end":return e.stop()}}),e,null,[[0,32],[9,20,23,26]])}))),hr.apply(this,arguments)}function fr(e,t,n,i,a){var s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[i].push(arguments)};return window[a]&&"function"==typeof window[a]&&(s=window[a]),window[a]=function(e,t,n,i){function a(){return a=o(r().mark((function a(o){var s,u,c,l,h,f,d,p,v,g,y,m,w=arguments;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(r.prev=0,s=w.length,u=new Array(s>1?s-1:0),c=1;c<s;c++)u[c-1]=w[c];if("event"!==o){r.next=8;break}return l=u[0],h=u[1],r.next=6,lr(e,t,n,l,h);case 6:r.next=15;break;case 8:if("config"!==o){r.next=14;break}return f=u[0],d=u[1],r.next=12,ur(e,t,n,i,f,d);case 12:r.next=15;break;case 14:"consent"===o?(p=u[0],e("consent","update",p)):"get"===o?(v=u[0],g=u[1],y=u[2],e("get",v,g,y)):"set"===o?(m=u[0],e("set",m)):e.apply(void 0,[o].concat(u));case 15:r.next=20;break;case 17:r.prev=17,r.t0=r.catch(0),nr.error(r.t0);case 20:case"end":return r.stop()}}),a,null,[[0,17]])}))),a.apply(this,arguments)}return function(e){return a.apply(this,arguments)}}(s,e,t,n),{gtagCore:s,wrappedGtag:window[a]}}function dr(e){for(var t=window.document.getElementsByTagName("script"),n=0,r=Object.values(t);n<r.length;n++){var i=r[n];if(i.src&&i.src.includes(tr)&&i.src.includes(e))return i}return null}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var pr=30,vr=function(){return b((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;w(this,e),this.throttleMetadata=t,this.intervalMillis=n}),[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}])}(),gr=new vr;function yr(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function mr(e){return wr.apply(this,arguments)}function wr(){return(wr=o(r().mark((function e(t){var n,i,a,o,s,u,c,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.appId,a=t.apiKey,o={method:"GET",headers:yr(a)},s=er.replace("{app-id}",i),e.next=5,fetch(s,o);case 5:if(200===(u=e.sent).status||304===u.status){e.next=18;break}return c="",e.prev=8,e.next=11,u.json();case 11:l=e.sent,(null===(n=l.error)||void 0===n?void 0:n.message)&&(c=l.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw ir.create("config-fetch-failed",{httpStatus:u.status,responseMessage:c});case 18:return e.abrupt("return",u.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function kr(e){return br.apply(this,arguments)}function br(){return br=o(r().mark((function e(t){var n,i,a,s,u,c,l,h=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:gr,i=t.options,a=i.appId,s=i.apiKey,u=i.measurementId,a){e.next=5;break}throw ir.create("no-app-id");case 5:if(s){e.next=9;break}if(!u){e.next=8;break}return e.abrupt("return",{measurementId:u,appId:a});case 8:throw ir.create("no-api-key");case 9:return c=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new xr,setTimeout(o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.abort();case 1:case"end":return e.stop()}}),e)}))),Zn),e.abrupt("return",_r({appId:a,apiKey:s,measurementId:u},c,l,n));case 13:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}function _r(e,t,n){return Er.apply(this,arguments)}function Er(){return Er=o(r().mark((function e(t,n,i){var a,o,s,u,c,l,h,f,d,p,v=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.throttleEndTimeMillis,o=n.backoffCount,s=v.length>3&&void 0!==v[3]?v[3]:gr,c=t.appId,l=t.measurementId,e.prev=3,e.next=6,Tr(i,a);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!l){e.next=13;break}return nr.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===e.t0||void 0===e.t0?void 0:e.t0.message,"]")),e.abrupt("return",{appId:c,measurementId:l});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,mr(t);case 17:return h=e.sent,s.deleteThrottleMetadata(c),e.abrupt("return",h);case 22:if(e.prev=22,e.t1=e.catch(14),Ir(f=e.t1)){e.next=33;break}if(s.deleteThrottleMetadata(c),!l){e.next=32;break}return nr.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null==f?void 0:f.message,"]")),e.abrupt("return",{appId:c,measurementId:l});case 32:throw e.t1;case 33:return d=503===Number(null===(u=null==f?void 0:f.customData)||void 0===u?void 0:u.httpStatus)?ue(o,s.intervalMillis,pr):ue(o,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:o+1},s.setThrottleMetadata(c,p),nr.debug("Calling attemptFetch again in ".concat(d," millis")),e.abrupt("return",_r(t,p,i,s));case 38:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),Er.apply(this,arguments)}function Tr(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(ir.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function Ir(e){if(!(e instanceof Z&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var xr=function(){return b((function e(){w(this,e),this.listeners=[]}),[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}])}();
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function Sr(){return Sr=o(r().mark((function e(t,n,i,a,o){var s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!o.global){e.next=5;break}return t("event",i,a),e.abrupt("return");case 5:return e.next=7,n;case 7:s=e.sent,u=Object.assign(Object.assign({},a),{send_to:s}),t("event",i,u);case 10:case"end":return e.stop()}}),e)}))),Sr.apply(this,arguments)}function Ar(){return Cr.apply(this,arguments)}function Cr(){return(Cr=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y()){e.next=5;break}return nr.warn(ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,X();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),nr.warn(ir.create("indexeddb-unavailable",{errorInfo:null===e.t0||void 0===e.t0?void 0:e.t0.toString()}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function Dr(){return Dr=o(r().mark((function e(t,n,i,a,o,u,c){var l,h,f,d,p,v,g,y;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(h=kr(t)).then((function(e){i[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&nr.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return nr.error(e)})),n.push(h),f=Ar().then((function(e){return e?a.getId():void 0})),e.next=6,Promise.all([h,f]);case 6:return d=e.sent,p=s(d,2),v=p[0],g=p[1],dr(u)||sr(u,v.measurementId),o("js",new Date),(y=null!==(l=null==c?void 0:c.config)&&void 0!==l?l:{})[Jn]="firebase",y.update=!0,null!=g&&(y[Xn]=g),o("config",v.measurementId,y),e.abrupt("return",v.measurementId);case 18:case"end":return e.stop()}}),e)}))),Dr.apply(this,arguments)}var Nr,Or,Pr=function(){return b((function e(t){w(this,e),this.app=t}),[{key:"_delete",value:function(){return delete Mr[this.app.options.appId],Promise.resolve()}}])}(),Mr={},Lr=[],Rr={},Fr="dataLayer",Ur="gtag",Vr=!1;function jr(){var e,t=[];if(e="object"===("undefined"==typeof chrome?"undefined":h(chrome))?chrome.runtime:"object"===("undefined"==typeof browser?"undefined":h(browser))?browser.runtime:void 0,"object"===h(e)&&void 0!==e.id&&t.push("This is a browser extension environment."),J()||t.push("Cookies are not available."),t.length>0){var n=t.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),r=ir.create("invalid-analytics-context",{errorInfo:n});nr.warn(r.message)}}function Br(e,t,n){jr();var r=e.options.appId;if(!r)throw ir.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw ir.create("no-api-key");nr.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Mr[r])throw ir.create("already-exists",{id:r});if(!Vr){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Fr);var i=fr(Mr,Lr,Rr,Fr,Ur),a=i.wrappedGtag,o=i.gtagCore;Or=a,Nr=o,Vr=!0}return Mr[r]=function(e,t,n,r,i,a,o){return Dr.apply(this,arguments)}(e,Lr,Rr,t,Nr,Fr,n),new Pr(e)}function zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze(),t=$e(e=ce(e),Yn);return t.isInitialized()?t.getImmediate():function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=$e(e,Yn);if(n.isInitialized()){var r=n.getImmediate();if(ne(t,n.getOptions()))return r;throw ir.create("already-initialized")}var i=n.initialize({options:t});return i}(e)}function qr(e,t,n,r){e=ce(e),function(e,t,n,r,i){return Sr.apply(this,arguments)}(Or,Mr[e.app.options.appId],t,n,r).catch((function(e){return nr.error(e)}))}var Kr="@firebase/analytics",Hr="0.10.0";Ge(new le(Yn,(function(e,t){var n=t.options;return Br(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Ge(new le("analytics-internal",(function(e){try{var t=e.getProvider(Yn).getImmediate();return{logEvent:function(e,n,r){return qr(t,e,n,r)}}}catch(n){throw ir.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),et(Kr,Hr),et(Kr,Hr,"esm2017");var Gr,$r,Wr="@firebase/performance",Qr="0.6.4",Yr=Qr,Xr="FB-PERF-TRACE-MEASURE",Jr="_wt_",Zr="_fcp",ei="_fid",ti="@firebase/performance/config",ni="@firebase/performance/configexpire",ri="Performance",ii=(_(_(_(_(_(_(_(_(_(_(M={},"trace started","Trace {$traceName} was started before."),"trace stopped","Trace {$traceName} is not running."),"nonpositive trace startTime","Trace {$traceName} startTime should be positive."),"nonpositive trace duration","Trace {$traceName} duration should be positive."),"no window","Window is not available."),"no app id","App id is not available."),"no project id","Project id is not available."),"no api key","Api key is not available."),"invalid cc log","Attempted to queue invalid cc event"),"FB not default","Performance can only start when Firebase app instance is the default one."),_(_(_(_(_(_(M,"RC response not ok","RC response is not ok"),"invalid attribute name","Attribute name {$attributeName} is invalid."),"invalid attribute value","Attribute value {$attributeValue} is invalid."),"invalid custom metric name","Custom metric name {$customMetricName} is invalid"),"invalid String merger input","Input for String merger is invalid, contact support team to resolve."),"already initialized","initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance.")),ai=new ee("performance",ri,ii),oi=new be(ri);oi.logLevel=de.INFO;var si,ui,ci=function(){function e(t){if(w(this,e),this.window=t,!t)throw ai.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return b(e,[{key:"getUrl",value:function(){return this.windowLocation.href.split("?")[0]}},{key:"mark",value:function(e){this.performance&&this.performance.mark&&this.performance.mark(e)}},{key:"measure",value:function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)}},{key:"getEntriesByType",value:function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}},{key:"getEntriesByName",value:function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}},{key:"getTimeOrigin",value:function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}},{key:"requiredApisAvailable",value:function(){return fetch&&Promise&&J()?!!Y()||(oi.info("IndexedDB is not supported by current browswer"),!1):(oi.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}},{key:"setupObserver",value:function(e,t){this.PerformanceObserver&&new this.PerformanceObserver((function(e){var n,r=u(e.getEntries());try{for(r.s();!(n=r.n()).done;){var i=n.value;t(i)}}catch(a){r.e(a)}finally{r.f()}})).observe({entryTypes:[e]})}}],[{key:"getInstance",value:function(){return void 0===Gr&&(Gr=new e($r)),Gr}}])}();function li(){return si}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function hi(e,t){var n=e.length-t.length;if(n<0||n>1)throw ai.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var fi,di=function(){function e(){w(this,e),this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=hi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=hi("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return b(e,[{key:"getFlTransportFullUrl",value:function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}}],[{key:"getInstance",value:function(){return void 0===ui&&(ui=new e),ui}}])}();
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(fi||(fi={}));var pi=["firebase_","google_","ga_"],vi=new RegExp("^[a-zA-Z]\\w*$");function gi(){var e=ci.getInstance().navigator;return(null==e?void 0:e.serviceWorker)?e.serviceWorker.controller?2:3:1}function yi(){switch(ci.getInstance().document.visibilityState){case"visible":return fi.VISIBLE;case"hidden":return fi.HIDDEN;default:return fi.UNKNOWN}}function mi(){var e=ci.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function wi(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.appId;if(!n)throw ai.create("no app id");return n}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
var ki="0.0.1",bi={loggingEnabled:!0},_i="FIREBASE_INSTALLATIONS_AUTH";function Ei(e,t){var n=function(){var e=ci.getInstance().localStorage;if(!e)return;var t=e.getItem(ni);if(!(t&&(n=t,Number(n)>Date.now())))return;var n;var r=e.getItem(ti);if(!r)return;try{return JSON.parse(r)}catch(i){return}}();return n?(Ii(n),Promise.resolve()):function(e,t){return(n=e.installations,r=n.getToken(),r.then((function(e){})),r).then((function(n){var r=function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.projectId;if(!n)throw ai.create("no project id");return n}(e.app),i=function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.apiKey;if(!n)throw ai.create("no api key");return n}(e.app),a="https://firebaseremoteconfig.googleapis.com/v1/projects/".concat(r,"/namespaces/fireperf:fetch?key=").concat(i),o=new Request(a,{method:"POST",headers:{Authorization:"".concat(_i," ").concat(n)},body:JSON.stringify({app_instance_id:t,app_instance_id_token:n,app_id:wi(e.app),app_version:Yr,sdk_version:ki})});return fetch(o).then((function(e){if(e.ok)return e.json();throw ai.create("RC response not ok")}))})).catch((function(){oi.info(Ti)}));var n,r}(e,t).then(Ii).then((function(e){return function(e){var t=ci.getInstance().localStorage;if(!e||!t)return;t.setItem(ti,JSON.stringify(e)),t.setItem(ni,String(Date.now()+60*di.getInstance().configTimeToLive*60*1e3))}(e)}),(function(){}))}var Ti="Could not fetch config, will use default configs";function Ii(e){if(!e)return e;var t=di.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=bi.loggingEnabled,n.fpr_log_source?t.logSource=Number(n.fpr_log_source):bi.logSource&&(t.logSource=bi.logSource),n.fpr_log_endpoint_url?t.logEndPointUrl=n.fpr_log_endpoint_url:bi.logEndPointUrl&&(t.logEndPointUrl=bi.logEndPointUrl),n.fpr_log_transport_key?t.transportKey=n.fpr_log_transport_key:bi.transportKey&&(t.transportKey=bi.transportKey),void 0!==n.fpr_vc_network_request_sampling_rate?t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):void 0!==bi.networkRequestsSamplingRate&&(t.networkRequestsSamplingRate=bi.networkRequestsSamplingRate),void 0!==n.fpr_vc_trace_sampling_rate?t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):void 0!==bi.tracesSamplingRate&&(t.tracesSamplingRate=bi.tracesSamplingRate),t.logTraceAfterSampling=xi(t.tracesSamplingRate),t.logNetworkAfterSampling=xi(t.networkRequestsSamplingRate),e}function xi(e){return Math.random()<=e}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Si,Ai=1;function Ci(e){return Ai=2,Si=Si||function(e){return function(){var e=ci.getInstance().document;return new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}().then((function(){return t=e.installations,(n=t.getId()).then((function(e){si=e})),n;var t,n})).then((function(t){return Ei(e,t)})).then((function(){return Di()}),(function(){return Di()}))}(e),Si}function Di(){Ai=3}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Ni,Oi=1e4,Pi=3,Mi=1e3,Li=Pi,Ri=[],Fi=!1;function Ui(e){setTimeout((function(){var e,t;if(0!==Li)return Ri.length?(e=Ri.splice(0,Mi),t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}})),void function(e,t){return function(e){var t=di.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then((function(e){return e.ok||oi.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=Oi;isNaN(n)||(r=Math.max(n,r));var a=e.logResponseDetails;Array.isArray(a)&&a.length>0&&"RETRY_REQUEST_LATER"===a[0].responseAction&&(Ri=[].concat(i(t),i(Ri)),oi.info("Retry transport request later.")),Li=Pi,Ui(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:di.getInstance().logSource,log_event:t},e).catch((function(){Ri=[].concat(i(e),i(Ri)),Li--,oi.info("Tries left: ".concat(Li,".")),Ui(Oi)}))):Ui(Oi)}),e)}function Vi(e){return function(){!function(e){if(!e.eventTime||!e.message)throw ai.create("invalid cc log");Ri=[].concat(i(Ri),[e])}({message:e.apply(void 0,arguments),eventTime:Date.now()})}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function ji(e,t){Ni||(Ni=Vi(qi)),Ni(e,t)}function Bi(e){var t=di.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&ci.getInstance().requiredApisAvailable()&&(e.isAuto&&yi()!==fi.VISIBLE||(3===Ai?zi(e):Ci(e.performanceController).then((function(){return zi(e)}),(function(){return zi(e)}))))}function zi(e){if(li()){var t=di.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return ji(e,1)}),0)}}function qi(e,t){return 0===t?(r={url:(n=e).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:Ki(n.performanceController.app),network_request_metric:r},JSON.stringify(i)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:Ki(e.performanceController.app),trace_metric:t};return JSON.stringify(r)}(e);var n,r,i}function Ki(e){return{google_app_id:wi(e),app_instance_id:li(),web_app_info:{sdk_version:Yr,page_url:ci.getInstance().getUrl(),service_worker_status:gi(),visibility_state:yi(),effective_connection_type:mi()},application_process_state:0}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Hi=["_fp",Zr,ei];
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
var Gi=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;w(this,e),this.performanceController=t,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=ci.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="".concat("FB-PERF-TRACE-START","-").concat(this.randomId,"-").concat(this.name),this.traceStopMark="".concat("FB-PERF-TRACE-STOP","-").concat(this.randomId,"-").concat(this.name),this.traceMeasure=i||"".concat(Xr,"-").concat(this.randomId,"-").concat(this.name),i&&this.calculateTraceMetrics())}return b(e,[{key:"start",value:function(){if(1!==this.state)throw ai.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}},{key:"stop",value:function(){if(2!==this.state)throw ai.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Bi(this)}},{key:"record",value:function(e,t,n){if(e<=0)throw ai.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw ai.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var a=i[r];isNaN(Number(n.metrics[a]))||(this.counters[a]=Math.floor(Number(n.metrics[a])))}Bi(this)}},{key:"incrementMetric",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}},{key:"putMetric",value:function(e,t){if(!function(e,t){return!(0===e.length||e.length>100)&&(t&&t.startsWith(Jr)&&Hi.indexOf(e)>-1||!e.startsWith("_"))}(e,this.name))throw ai.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=(n=null!=t?t:0,(r=Math.floor(n))<n&&oi.info("Metric value should be an Integer, setting the value as : ".concat(r,".")),r)}},{key:"getMetric",value:function(e){return this.counters[e]||0}},{key:"putAttribute",value:function(e,t){var n=function(e){return!(0===e.length||e.length>40||pi.some((function(t){return e.startsWith(t)}))||!e.match(vi))}(e),r=function(e){return 0!==e.length&&e.length<=100}(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw ai.create("invalid attribute name",{attributeName:e});if(!r)throw ai.create("invalid attribute value",{attributeValue:t})}}},{key:"getAttribute",value:function(e){return this.customAttributes[e]}},{key:"removeAttribute",value:function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}},{key:"getAttributes",value:function(){return Object.assign({},this.customAttributes)}},{key:"setStartTime",value:function(e){this.startTimeUs=e}},{key:"setDuration",value:function(e){this.durationUs=e}},{key:"calculateTraceMetrics",value:function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}}],[{key:"createOobTrace",value:function(t,n,r,i){var a=ci.getInstance().getUrl();if(a){var o=new e(t,Jr+a,!0),s=Math.floor(1e3*ci.getInstance().getTimeOrigin());o.setStartTime(s),n&&n[0]&&(o.setDuration(Math.floor(1e3*n[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*n[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*n[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*n[0].loadEventEnd)));if(r){var u=r.find((function(e){return"first-paint"===e.name}));u&&u.startTime&&o.putMetric("_fp",Math.floor(1e3*u.startTime));var c=r.find((function(e){return"first-contentful-paint"===e.name}));c&&c.startTime&&o.putMetric(Zr,Math.floor(1e3*c.startTime)),i&&o.putMetric(ei,Math.floor(1e3*i))}Bi(o)}}},{key:"createUserTimingTrace",value:function(t,n){Bi(new e(t,n,!1,n))}}])}();
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function $i(e,t){var n=t;if(n&&void 0!==n.responseStart){var r=ci.getInstance().getTimeOrigin(),i=Math.floor(1e3*(n.startTime+r)),a=n.responseStart?Math.floor(1e3*(n.responseStart-n.startTime)):void 0,o=Math.floor(1e3*(n.responseEnd-n.startTime));!function(e){var t=di.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return ji(e,0)}),0)}}({performanceController:e,url:n.name&&n.name.split("?")[0],responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:a,timeToResponseCompletedUs:o})}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Wi=5e3;function Qi(e){li()&&(setTimeout((function(){return function(e){var t=ci.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");if(t.onFirstInputDelay){var i=setTimeout((function(){Gi.createOobTrace(e,n,r),i=void 0}),Wi);t.onFirstInputDelay((function(t){i&&(clearTimeout(i),Gi.createOobTrace(e,n,r,t))}))}else Gi.createOobTrace(e,n,r)}(e)}),0),setTimeout((function(){return function(e){var t,n=ci.getInstance(),r=u(n.getEntriesByType("resource"));try{for(r.s();!(t=r.n()).done;){var i=t.value;$i(e,i)}}catch(a){r.e(a)}finally{r.f()}n.setupObserver("resource",(function(t){return $i(e,t)}))}(e)}),0),setTimeout((function(){return function(e){var t,n=ci.getInstance(),r=u(n.getEntriesByType("measure"));try{for(r.s();!(t=r.n()).done;){var i=t.value;Yi(e,i)}}catch(a){r.e(a)}finally{r.f()}n.setupObserver("measure",(function(t){return Yi(e,t)}))}(e)}),0))}function Yi(e,t){var n=t.name;n.substring(0,Xr.length)!==Xr&&Gi.createUserTimingTrace(e,n)}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Xi=function(){return b((function e(t,n){w(this,e),this.app=t,this.installations=n,this.initialized=!1}),[{key:"_init",value:function(e){var t=this;this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),ci.getInstance().requiredApisAvailable()?X().then((function(e){e&&(Fi||(Ui(5500),Fi=!0),Ci(t).then((function(){return Qi(t)}),(function(){return Qi(t)})),t.initialized=!0)})).catch((function(e){oi.info("Environment doesn't support IndexedDB: ".concat(e))})):oi.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}},{key:"instrumentationEnabled",get:function(){return di.getInstance().instrumentationEnabled},set:function(e){di.getInstance().instrumentationEnabled=e}},{key:"dataCollectionEnabled",get:function(){return di.getInstance().dataCollectionEnabled},set:function(e){di.getInstance().dataCollectionEnabled=e}}])}();Ge(new le("performance",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==r.name)throw ai.create("FB not default");if("undefined"==typeof window)throw ai.create("no window");!function(e){$r=e}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(window);var a=new Xi(r,i);return a._init(n),a}),"PUBLIC")),et(Wr,Qr),et(Wr,Qr,"esm2017");var Ji="@firebase/remote-config",Zi="0.4.4",ea=function(){return b((function e(){w(this,e),this.listeners=[]}),[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}])}(),ta="remote-config",na=(_(_(_(_(_(_(_(_(_(_(L={},"registration-window","Undefined window object. This SDK only supports usage in a browser environment."),"registration-project-id","Undefined project identifier. Check Firebase app initialization."),"registration-api-key","Undefined API key. Check Firebase app initialization."),"registration-app-id","Undefined app identifier. Check Firebase app initialization."),"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),"fetch-client-network","Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}."),"fetch-timeout",'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.'),_(_(_(_(L,"fetch-throttle",'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.'),"fetch-client-parse","Fetch client could not parse response. Original error: {$originalErrorMessage}."),"fetch-status","Fetch server returned an HTTP error status. HTTP status: {$httpStatus}."),"indexed-db-unavailable","Indexed DB is not supported by current browser")),ra=new ee("remoteconfig","Remote Config",na);
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
var ia=["1","true","t","yes","y","on"],aa=function(){return b((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";w(this,e),this._source=t,this._value=n}),[{key:"asString",value:function(){return this._value}},{key:"asBoolean",value:function(){return"static"!==this._source&&ia.indexOf(this._value.toLowerCase())>=0}},{key:"asNumber",value:function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e}},{key:"getSource",value:function(){return this._source}}])}();function oa(e){return sa.apply(this,arguments)}function sa(){return sa=o(r().mark((function e(t){var n,i,a,o,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ce(t),e.next=3,Promise.all([n._storage.getLastSuccessfulFetchResponse(),n._storage.getActiveConfigEtag()]);case 3:if(i=e.sent,a=s(i,2),o=a[0],u=a[1],o&&o.config&&o.eTag&&o.eTag!==u){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,Promise.all([n._storageCache.setActiveConfig(o.config),n._storage.setActiveConfigEtag(o.eTag)]);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),sa.apply(this,arguments)}function ua(e){return ca.apply(this,arguments)}function ca(){return ca=o(r().mark((function e(t){var n,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ce(t),i=new ea,setTimeout(o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.abort();case 1:case"end":return e.stop()}}),e)}))),n.settings.fetchTimeoutMillis),e.prev=3,e.next=6,n._client.fetch({cacheMaxAgeMillis:n.settings.minimumFetchIntervalMillis,signal:i});case 6:return e.next=8,n._storageCache.setLastFetchStatus("success");case 8:e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(3),s=e.t0,u="fetch-throttle",a=s instanceof Z&&-1!==s.code.indexOf(u)?"throttle":"failure",e.next=15,n._storageCache.setLastFetchStatus(a);case 15:throw e.t0;case 16:case"end":return e.stop()}var s,u}),e,null,[[3,10]])}))),ca.apply(this,arguments)}function la(e,t){var n=ce(e);n._isInitializationComplete||n._logger.debug('A value was requested for key "'.concat(t,'" before SDK initialization completed.')+" Await on ensureInitialized if the intent was to get a previously activated value.");var r=n._storageCache.getActiveConfig();return r&&void 0!==r[t]?new aa("remote",r[t]):n.defaultConfig&&void 0!==n.defaultConfig[t]?new aa("default",String(n.defaultConfig[t])):(n._logger.debug('Returning static value for key "'.concat(t,'".')+" Define a default or remote value if this is unintentional."),new aa("static"))}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var ha=function(){return b((function e(t,n,r,i){w(this,e),this.client=t,this.storage=n,this.storageCache=r,this.logger=i}),[{key:"isCachedDataFresh",value:function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check."+" Cache age millis: ".concat(n,".")+" Cache max age millis (minimumFetchIntervalMillis setting): ".concat(e,".")+" Is cache hit: ".concat(r,".")),r}},{key:"fetch",value:(e=o(r().mark((function e(t){var n,i,a,o,u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);case 2:if(n=e.sent,i=s(n,2),a=i[0],!(o=i[1])||!this.isCachedDataFresh(t.cacheMaxAgeMillis,a)){e.next=8;break}return e.abrupt("return",o);case 8:return t.eTag=o&&o.eTag,e.next=11,this.client.fetch(t);case 11:return u=e.sent,c=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===u.status&&c.push(this.storage.setLastSuccessfulFetchResponse(u)),e.next=16,Promise.all(c);case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}]);var e}();
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function fa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return e.languages&&e.languages[0]||e.language}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var da=function(){return b((function e(t,n,r,i,a,o){w(this,e),this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=o}),[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=o(r().mark((function e(t){var n,i,a,o,u,c,l,h,f,d,p,v,g,y,m,w,k,b;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]);case 2:return n=e.sent,i=s(n,2),a=i[0],o=i[1],u=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",c="".concat(u,"/v1/projects/").concat(this.projectId,"/namespaces/").concat(this.namespace,":fetch?key=").concat(this.apiKey),l={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},h={sdk_version:this.sdkVersion,app_instance_id:a,app_instance_id_token:o,app_id:this.appId,language_code:fa()},f={method:"POST",headers:l,body:JSON.stringify(h)},d=fetch(c,f),p=new Promise((function(e,n){t.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),e.prev=13,e.next=16,Promise.race([d,p]);case 16:return e.next=18,d;case 18:v=e.sent,e.next=26;break;case 21:throw e.prev=21,e.t0=e.catch(13),g="fetch-client-network","AbortError"===(null===e.t0||void 0===e.t0?void 0:e.t0.name)&&(g="fetch-timeout"),ra.create(g,{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 26:if(y=v.status,m=v.headers.get("ETag")||void 0,200!==v.status){e.next=40;break}return e.prev=29,e.next=32,v.json();case 32:b=e.sent,e.next=38;break;case 35:throw e.prev=35,e.t1=e.catch(29),ra.create("fetch-client-parse",{originalErrorMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 38:w=b.entries,k=b.state;case 40:if("INSTANCE_STATE_UNSPECIFIED"===k?y=500:"NO_CHANGE"===k?y=304:"NO_TEMPLATE"!==k&&"EMPTY_CONFIG"!==k||(w={}),304===y||200===y){e.next=43;break}throw ra.create("fetch-status",{httpStatus:y});case 43:return e.abrupt("return",{status:y,eTag:m,config:w});case 44:case"end":return e.stop()}}),e,this,[[13,21],[29,35]])})));return function(t){return e.apply(this,arguments)}}())}])}();
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function pa(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(ra.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function va(e){if(!(e instanceof Z&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var ga=function(){return b((function e(t,n){w(this,e),this.client=t,this.storage=n}),[{key:"fetch",value:(t=o(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.getThrottleMetadata();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={backoffCount:0,throttleEndTimeMillis:Date.now()};case 5:return n=e.t0,e.abrupt("return",this.attemptFetch(t,n));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"attemptFetch",value:(e=o(r().mark((function e(t,n){var i,a,o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,e.next=3,pa(t.signal,i);case 3:return e.prev=3,e.next=6,this.client.fetch(t);case 6:return o=e.sent,e.next=9,this.storage.deleteThrottleMetadata();case 9:return e.abrupt("return",o);case 12:if(e.prev=12,e.t0=e.catch(3),va(e.t0)){e.next=16;break}throw e.t0;case 16:return s={throttleEndTimeMillis:Date.now()+ue(a),backoffCount:a+1},e.next=19,this.storage.setThrottleMetadata(s);case 19:return e.abrupt("return",this.attemptFetch(t,s));case 20:case"end":return e.stop()}}),e,this,[[3,12]])}))),function(t,n){return e.apply(this,arguments)})}]);var e,t}(),ya=function(){return b((function e(t,n,r,i,a){w(this,e),this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}),[{key:"fetchTimeMillis",get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}},{key:"lastFetchStatus",get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}])}();
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function ma(e,t){var n=e.target.error||void 0;return ra.create(t,{originalErrorMessage:n&&(null==n?void 0:n.message)})}var wa="app_namespace_store";var ka=function(){return b((function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Promise((function(e,t){try{var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(ma(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(wa,{keyPath:"compositeKey"})}}catch(r){t(ra.create("storage-open",{originalErrorMessage:null==r?void 0:r.message}))}}));w(this,e),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}),[{key:"getLastFetchStatus",value:function(){return this.get("last_fetch_status")}},{key:"setLastFetchStatus",value:function(e){return this.set("last_fetch_status",e)}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.get("last_successful_fetch_timestamp_millis")}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.set("last_successful_fetch_timestamp_millis",e)}},{key:"getLastSuccessfulFetchResponse",value:function(){return this.get("last_successful_fetch_response")}},{key:"setLastSuccessfulFetchResponse",value:function(e){return this.set("last_successful_fetch_response",e)}},{key:"getActiveConfig",value:function(){return this.get("active_config")}},{key:"setActiveConfig",value:function(e){return this.set("active_config",e)}},{key:"getActiveConfigEtag",value:function(){return this.get("active_config_etag")}},{key:"setActiveConfigEtag",value:function(e){return this.set("active_config_etag",e)}},{key:"getThrottleMetadata",value:function(){return this.get("throttle_metadata")}},{key:"setThrottleMetadata",value:function(e){return this.set("throttle_metadata",e)}},{key:"deleteThrottleMetadata",value:function(){return this.delete("throttle_metadata")}},{key:"get",value:(n=o(r().mark((function e(t){var n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDbPromise;case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,r){var a=n.transaction([wa],"readonly").objectStore(wa),o=i.createCompositeKey(t);try{var s=a.get(o);s.onerror=function(e){r(ma(e,"storage-get"))},s.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)}}catch(u){r(ra.create("storage-get",{originalErrorMessage:null==u?void 0:u.message}))}})));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"set",value:(t=o(r().mark((function e(t,n){var i,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDbPromise;case 2:return i=e.sent,e.abrupt("return",new Promise((function(e,r){var o=i.transaction([wa],"readwrite").objectStore(wa),s=a.createCompositeKey(t);try{var u=o.put({compositeKey:s,value:n});u.onerror=function(e){r(ma(e,"storage-set"))},u.onsuccess=function(){e()}}catch(c){r(ra.create("storage-set",{originalErrorMessage:null==c?void 0:c.message}))}})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"delete",value:(e=o(r().mark((function e(t){var n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDbPromise;case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,r){var a=n.transaction([wa],"readwrite").objectStore(wa),o=i.createCompositeKey(t);try{var s=a.delete(o);s.onerror=function(e){r(ma(e,"storage-delete"))},s.onsuccess=function(){e()}}catch(u){r(ra.create("storage-delete",{originalErrorMessage:null==u?void 0:u.message}))}})));case 4:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"createCompositeKey",value:function(e){return[this.appId,this.appName,this.namespace,e].join()}}]);var e,t,n}(),ba=function(){return b((function e(t){w(this,e),this.storage=t}),[{key:"getLastFetchStatus",value:function(){return this.lastFetchStatus}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.lastSuccessfulFetchTimestampMillis}},{key:"getActiveConfig",value:function(){return this.activeConfig}},{key:"loadFromStorage",value:(e=o(r().mark((function e(){var t,n,i,a,o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),i=this.storage.getActiveConfig(),e.next=5,t;case 5:return(a=e.sent)&&(this.lastFetchStatus=a),e.next=9,n;case 9:return(o=e.sent)&&(this.lastSuccessfulFetchTimestampMillis=o),e.next=13,i;case 13:(s=e.sent)&&(this.activeConfig=s);case 15:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"setLastFetchStatus",value:function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}},{key:"setActiveConfig",value:function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}]);var e}();
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function _a(e){return Ea.apply(this,arguments)}function Ea(){return(Ea=o(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ce(t),e.next=3,ua(t);case 3:return e.abrupt("return",oa(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ge(new le(ta,(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ra.create("registration-window");if(!Y())throw ra.create("indexed-db-unavailable");var a=r.options,o=a.projectId,s=a.apiKey,u=a.appId;if(!o)throw ra.create("registration-project-id");if(!s)throw ra.create("registration-api-key");if(!u)throw ra.create("registration-app-id");n=n||"firebase";var c=new ka(u,r.name,n),l=new ba(c),h=new be(Ji);h.logLevel=de.ERROR;var f=new da(i,Xe,n,o,s,u),d=new ga(f,c),p=new ha(d,c,l,h),v=new ya(r,p,l,c,h);return function(e){var t=ce(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),t._initializePromise}(v),v}),"PUBLIC").setMultipleInstances(!0)),et(Ji,Zi),et(Ji,Zi,"esm2017");var Ta={exports:{}};!function(e){e.exports=function(){var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",a="minute",o="hour",s="day",u="week",c="month",l="quarter",f="year",d="date",p="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},m=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},w={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),a=n-i<0,o=t.clone().add(r+(a?-1:1),c);return+(-(r+(n-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:f,w:u,d:s,D:d,h:o,m:a,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},k="en",b={};b[k]=y;var _="$isDayjsObject",E=function(e){return e instanceof S||!(!e||!e[_])},T=function e(t,n,r){var i;if(!t)return k;if("string"==typeof t){var a=t.toLowerCase();b[a]&&(i=a),n&&(b[a]=n,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;b[s]=t,i=s}return!r&&i&&(k=i),i||!r&&k},I=function(e,t){if(E(e))return e.clone();var n="object"==h(t)?t:{};return n.date=e,n.args=arguments,new S(n)},x=w;x.l=T,x.i=E,x.w=function(e,t){return I(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function h(e){this.$L=T(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[_]=!0}var y=h.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(v);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return x},y.isValid=function(){return!(this.$d.toString()===p)},y.isSame=function(e,t){var n=I(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return I(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<I(e)},y.$g=function(e,t,n){return x.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,r=!!x.u(t)||t,l=x.p(e),h=function(e,t){var i=x.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},p=function(e,t){return x.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,g=this.$M,y=this.$D,m="set"+(this.$u?"UTC":"");switch(l){case f:return r?h(1,0):h(31,11);case c:return r?h(1,g):h(0,g+1);case u:var w=this.$locale().weekStart||0,k=(v<w?v+7:v)-w;return h(r?y-k:y+(6-k),g);case s:case d:return p(m+"Hours",0);case o:return p(m+"Minutes",1);case a:return p(m+"Seconds",2);case i:return p(m+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,u=x.p(e),l="set"+(this.$u?"UTC":""),h=(n={},n[s]=l+"Date",n[d]=l+"Date",n[c]=l+"Month",n[f]=l+"FullYear",n[o]=l+"Hours",n[a]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[u],p=u===s?this.$D+(t-this.$W):t;if(u===c||u===f){var v=this.clone().set(d,1);v.$d[h](p),v.init(),this.$d=v.set(d,Math.min(this.$D,v.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[x.p(e)]()},y.add=function(r,l){var h,d=this;r=Number(r);var p=x.p(l),v=function(e){var t=I(d);return x.w(t.date(t.date()+Math.round(e*r)),d)};if(p===c)return this.set(c,this.$M+r);if(p===f)return this.set(f,this.$y+r);if(p===s)return v(1);if(p===u)return v(7);var g=(h={},h[a]=t,h[o]=n,h[i]=e,h)[p]||1,y=this.$d.getTime()+r*g;return x.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=x.z(this),a=this.$H,o=this.$m,s=this.$M,u=n.weekdays,c=n.months,l=n.meridiem,h=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},f=function(e){return x.s(a%12||12,e,"0")},d=l||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(g,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return x.s(t.$y,4,"0");case"M":return s+1;case"MM":return x.s(s+1,2,"0");case"MMM":return h(n.monthsShort,s,c,3);case"MMMM":return h(c,s);case"D":return t.$D;case"DD":return x.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(n.weekdaysMin,t.$W,u,2);case"ddd":return h(n.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(a);case"HH":return x.s(a,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return d(a,o,!0);case"A":return d(a,o,!1);case"m":return String(o);case"mm":return x.s(o,2,"0");case"s":return String(t.$s);case"ss":return x.s(t.$s,2,"0");case"SSS":return x.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,h,d){var p,v=this,g=x.p(h),y=I(r),m=(y.utcOffset()-this.utcOffset())*t,w=this-y,k=function(){return x.m(v,y)};switch(g){case f:p=k()/12;break;case c:p=k();break;case l:p=k()/3;break;case u:p=(w-m)/6048e5;break;case s:p=(w-m)/864e5;break;case o:p=w/n;break;case a:p=w/t;break;case i:p=w/e;break;default:p=w}return d?p:x.a(p)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=T(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return x.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},h}(),A=S.prototype;return I.prototype=A,[["$ms",r],["$s",i],["$m",a],["$H",o],["$W",s],["$M",c],["$y",f],["$D",d]].forEach((function(e){A[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),I.extend=function(e,t){return e.$i||(e(t,S,I),e.$i=!0),I},I.locale=T,I.isDayjs=E,I.unix=function(e){return I(1e3*e)},I.en=b[k],I.Ls=b,I.p={},I}()}(Ta);var Ia,xa=c(Ta.exports),Sa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Aa=Aa||{},Ca=Sa||self;function Da(e){var t=h(e);return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Na(e){var t=h(e);return"object"==t&&null!=e||"function"==t}var Oa="closure_uid_"+(1e9*Math.random()>>>0),Pa=0;function Ma(e,t,n){return e.call.apply(e.bind,arguments)}function La(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ra(e,t,n){return(Ra=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ma:La).apply(null,arguments)}function Fa(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ua(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Va(){this.s=this.s,this.o=this.o}Va.prototype.s=!1,Va.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Oa)&&e[Oa]||(e[Oa]=++Pa))},Va.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ja=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ba(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function za(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Da(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function qa(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}qa.prototype.h=function(){this.defaultPrevented=!0};var Ka=function(){if(!Ca.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ca.addEventListener("test",(function(){}),t),Ca.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Ha(e){return/^[\s\xa0]*$/.test(e)}function Ga(){var e=Ca.navigator;return e&&(e=e.userAgent)?e:""}function $a(e){return-1!=Ga().indexOf(e)}function Wa(e){return Wa[" "](e),e}Wa[" "]=function(){};var Qa,Ya,Xa,Ja=$a("Opera"),Za=$a("Trident")||$a("MSIE"),eo=$a("Edge"),to=eo||Za,no=$a("Gecko")&&!(-1!=Ga().toLowerCase().indexOf("webkit")&&!$a("Edge"))&&!($a("Trident")||$a("MSIE"))&&!$a("Edge"),ro=-1!=Ga().toLowerCase().indexOf("webkit")&&!$a("Edge");function io(){var e=Ca.document;return e?e.documentMode:void 0}e:{var ao="",oo=(Ya=Ga(),no?/rv:([^\);]+)(\)|;)/.exec(Ya):eo?/Edge\/([\d\.]+)/.exec(Ya):Za?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ya):ro?/WebKit\/(\S+)/.exec(Ya):Ja?/(?:Version)[ \/]?(\S+)/.exec(Ya):void 0);if(oo&&(ao=oo?oo[1]:""),Za){var so=io();if(null!=so&&so>parseFloat(ao)){Qa=String(so);break e}}Qa=ao}if(Ca.document&&Za){var uo=io();Xa=uo||(parseInt(Qa,10)||void 0)}else Xa=void 0;var co=Xa;function lo(e,t){if(qa.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(no){e:{try{Wa(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ho[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&lo.$.h.call(this)}}Ua(lo,qa);var ho={2:"touch",3:"pen",4:"mouse"};lo.prototype.h=function(){lo.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var fo="closure_listenable_"+(1e6*Math.random()|0),po=0;function vo(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++po,this.fa=this.ia=!1}function go(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function yo(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function mo(e){var t={};for(var n in e)t[n]=e[n];return t}var wo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ko(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<wo.length;a++)n=wo[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function bo(e){this.src=e,this.g={},this.h=0}function _o(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ja(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(go(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Eo(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}bo.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Eo(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new vo(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var To="closure_lm_"+(1e6*Math.random()|0),Io={};function xo(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)xo(e,t[a],n,r,i);return null}return n=Po(n),e&&e[fo]?e.O(t,n,Na(r)?!!r.capture:!!r,i):function(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Na(i)?!!i.capture:!!i,s=No(e);if(s||(e[To]=s=new bo(e)),n=s.add(t,n,r,o,a),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Do;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ka||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Co(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function So(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)So(e,t[a],n,r,i);else r=Na(r)?!!r.capture:!!r,n=Po(n),e&&e[fo]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Eo(a=e.g[t],n,r,i))&&(go(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=No(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Eo(t,n,r,i)),(n=-1<e?t[e]:null)&&Ao(n))}function Ao(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[fo])_o(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Co(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=No(t))?(_o(n,e),0==n.h&&(n.src=null,t[To]=null)):go(e)}}}function Co(e){return e in Io?Io[e]:Io[e]="on"+e}function Do(e,t){if(e.fa)e=!0;else{t=new lo(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Ao(e),e=n.call(r,t)}return e}function No(e){return(e=e[To])instanceof bo?e:null}var Oo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Po(e){return"function"==typeof e?e:(e[Oo]||(e[Oo]=function(t){return e.handleEvent(t)}),e[Oo])}function Mo(){Va.call(this),this.i=new bo(this),this.S=this,this.J=null}function Lo(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new qa(t,e);else if(t instanceof qa)t.target=t.target||e;else{var i=t;ko(t=new qa(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ro(o,r,!0,t)&&i}if(i=Ro(o=t.g=e,r,!0,t)&&i,i=Ro(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ro(o=t.g=n[a],r,!1,t)&&i}function Ro(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&_o(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Ua(Mo,Va),Mo.prototype[fo]=!0,Mo.prototype.removeEventListener=function(e,t,n,r){So(this,e,t,n,r)},Mo.prototype.N=function(){if(Mo.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)go(n[r]);delete t.g[e],t.h--}}this.J=null},Mo.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Mo.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Fo=Ca.JSON.stringify,Uo=function(){return b((function e(t,n){w(this,e),this.i=t,this.j=n,this.h=0,this.g=null}),[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}])}();function Vo(){var e=$o,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var jo=function(){return b((function e(){w(this,e),this.h=this.g=null}),[{key:"add",value:function(e,t){var n=Bo.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}])}(),Bo=new Uo((function(){return new zo}),(function(e){return e.reset()})),zo=function(){return b((function e(){w(this,e),this.next=this.g=this.h=null}),[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}])}();function qo(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ko(e){Ca.setTimeout((function(){throw e}),0)}var Ho,Go=!1,$o=new jo,Wo=function(){var e=Ca.Promise.resolve(void 0);Ho=function(){e.then(Qo)}},Qo=function(){for(var e;e=Vo();){try{e.h.call(e.g)}catch(n){Ko(n)}var t=Bo;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Go=!1};function Yo(e,t){Mo.call(this),this.h=e||1,this.g=t||Ca,this.j=Ra(this.qb,this),this.l=Date.now()}function Xo(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Jo(e,t,n){if("function"==typeof e)n&&(e=Ra(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ra(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ca.setTimeout(e,t||0)}function Zo(e){e.g=Jo((function(){e.g=null,e.i&&(e.i=!1,Zo(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ua(Yo,Mo),(Ia=Yo.prototype).ga=!1,Ia.T=null,Ia.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Lo(this,"tick"),this.ga&&(Xo(this),this.start()))}},Ia.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ia.N=function(){Yo.$.N.call(this),Xo(this),delete this.g};var es=function(t){function n(e,t){var r;return w(this,n),(r=f(this,n)).m=e,r.j=t,r.h=null,r.i=!1,r.g=null,r}return d(n,t),b(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Zo(this)}},{key:"N",value:function(){e(m(n.prototype),"N",this).call(this),this.g&&(Ca.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}])}(Va);function ts(e){Va.call(this),this.h=e,this.g={}}Ua(ts,Va);var ns=[];function rs(e,t,n,r){Array.isArray(n)||(n&&(ns[0]=n.toString()),n=ns);for(var i=0;i<n.length;i++){var a=xo(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function is(e){yo(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ao(e)}),e),e.g={}}function as(){this.g=!0}function os(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Fo(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}ts.prototype.N=function(){ts.$.N.call(this),is(this)},ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},as.prototype.Ea=function(){this.g=!1},as.prototype.info=function(){};var ss={},us=null;function cs(){return us=us||new Mo}function ls(e){qa.call(this,ss.Ta,e)}function hs(e){var t=cs();Lo(t,new ls(t))}function fs(e,t){qa.call(this,ss.STAT_EVENT,e),this.stat=t}function ds(e){var t=cs();Lo(t,new fs(t,e))}function ps(e,t){qa.call(this,ss.Ua,e),this.size=t}function vs(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Ca.setTimeout((function(){e()}),t)}ss.Ta="serverreachability",Ua(ls,qa),ss.STAT_EVENT="statevent",Ua(fs,qa),ss.Ua="timingevent",Ua(ps,qa);var gs={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ys={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ms(){}function ws(e){return e.h||(e.h=e.i())}function ks(){}ms.prototype.h=null;var bs,_s={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Es(){qa.call(this,"d")}function Ts(){qa.call(this,"c")}function Is(){}function xs(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ts(this),this.P=As,e=to?125:void 0,this.V=new Yo(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ss}function Ss(){this.i=null,this.g="",this.h=!1}Ua(Es,qa),Ua(Ts,qa),Ua(Is,ms),Is.prototype.g=function(){return new XMLHttpRequest},Is.prototype.i=function(){return{}},bs=new Is;var As=45e3,Cs={},Ds={};function Ns(e,t,n){e.L=1,e.v=Ys(Hs(t)),e.s=n,e.S=!0,Os(e,null)}function Os(e,t){e.G=Date.now(),Rs(e),e.A=Hs(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),cu(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Ss,e.g=cc(e.l,n?t:null,!e.s),0<e.O&&(e.M=new es(Ra(e.Pa,e,e.g),e.O)),rs(e.U,e.g,"readystatechange",e.nb),t=e.I?mo(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),hs(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Ps(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Ms(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Ls(e,n))==Ds){4==t&&(e.o=4,ds(14),i=!1),os(e.j,e.m,null,"[Incomplete Response]");break}if(r==Cs){e.o=4,ds(15),os(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}os(e.j,e.m,r,null),Bs(e,r)}Ps(e)&&r!=Ds&&r!=Cs&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ds(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),tc(t),t.M=!0,ds(11))):(os(e.j,e.m,n,"[Invalid Chunked Response]"),js(e),Vs(e))}function Ls(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ds:(n=Number(t.substring(n,r)),isNaN(n)?Cs:(r+=1)+n>t.length?Ds:(t=t.slice(r,r+n),e.C=r+n,t))}function Rs(e){e.Y=Date.now()+e.P,Fs(e,e.P)}function Fs(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=vs(Ra(e.lb,e),t)}function Us(e){e.B&&(Ca.clearTimeout(e.B),e.B=null)}function Vs(e){0==e.l.H||e.J||ic(e.l,e)}function js(e){Us(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Xo(e.V),is(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Bs(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||gu(n.i,e)))if(!e.K&&gu(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;rc(n),$u(n)}ec(n),ds(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=vs(Ra(n.ib,n),6e3));if(1>=vu(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else oc(n,11)}else if((e.K||n.g==e)&&rc(n),!Ha(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(yu(h,h.h),h.h=null))}if(r.F){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.Da=f,Qs(r.I,r.F,f))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=uc(r,r.J?r.pa:null,r.Y),d.K){mu(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Us(p),Rs(p)),r.g=d}else Zu(r);0<n.j.length&&Qu(n)}else"stop"!=a[0]&&"close"!=a[0]||oc(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?oc(n,7):Gu(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}hs()}catch(a){}}function zs(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Da(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(Da(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(Da(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Ia=xs.prototype).setTimeout=function(e){this.P=e},Ia.nb=function(e){e=e.target;var t=this.M;t&&3==ju(e)?t.l():this.Pa(e)},Ia.Pa=function(e){try{if(e==this.g)e:{var t=ju(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||to||this.g&&(this.h.h||this.g.ja()||Bu(this.g)))){this.J||4!=t||7==n||hs(),Us(this);var r=this.g.da();this.ca=r;t:if(Ps(this)){var i=Bu(this.g);e="";var a=i.length,o=4==ju(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){js(this),Vs(this);var s="";break t}this.h.i=new Ca.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ha(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,ds(12),js(this),Vs(this);break e}os(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bs(this,r)}this.S?(Ms(this,t,s),to&&this.i&&3==t&&(rs(this.U,this.V,"tick",this.mb),this.V.start())):(os(this.j,this.m,s,null),Bs(this,s)),4==t&&js(this),this.i&&!this.J&&(4==t?ic(this.l,this):(this.i=!1,Rs(this)))}else(function(e){var t={};e=(e.g&&2<=ju(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Ha(e[n])){var r=qo(e[n]),i=r[0];if("string"==typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,ds(12)):(this.o=0,ds(13)),js(this),Vs(this)}}}catch(t){}},Ia.mb=function(){if(this.g){var e=ju(this.g),t=this.g.ja();this.C<t.length&&(Us(this),Ms(this,e,t),this.i&&4!=e&&Rs(this))}},Ia.cancel=function(){this.J=!0,js(this)},Ia.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(hs(),ds(17)),js(this),this.o=2,Vs(this)):Fs(this,this.Y-e)};var qs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ks(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ks){this.h=e.h,Gs(this,e.j),this.s=e.s,this.g=e.g,$s(this,e.m),this.l=e.l;var t=e.i,n=new au;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ws(this,n),this.o=e.o}else e&&(t=String(e).match(qs))?(this.h=!1,Gs(this,t[1]||"",!0),this.s=Xs(t[2]||""),this.g=Xs(t[3]||"",!0),$s(this,t[4]),this.l=Xs(t[5]||"",!0),Ws(this,t[6]||"",!0),this.o=Xs(t[7]||"")):(this.h=!1,this.i=new au(null,this.h))}function Hs(e){return new Ks(e)}function Gs(e,t,n){e.j=n?Xs(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function $s(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ws(e,t,n){t instanceof au?(e.i=t,function(e,t){t&&!e.j&&(ou(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(su(this,t),cu(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Js(t,ru)),e.i=new au(t,e.h))}function Qs(e,t,n){e.i.set(t,n)}function Ys(e){return Qs(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Xs(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Js(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Zs),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Zs(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ks.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Js(t,eu,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Js(t,eu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Js(n,"/"==n.charAt(0)?nu:tu,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Js(n,iu)),e.join("")};var eu=/[#\/\?@]/g,tu=/[#\?:]/g,nu=/[#\?]/g,ru=/[#\?@]/g,iu=/#/g;function au(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ou(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function su(e,t){ou(e),t=lu(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function uu(e,t){return ou(e),t=lu(e,t),e.g.has(t)}function cu(e,t,n){su(e,t),0<n.length&&(e.i=null,e.g.set(lu(e,t),Ba(n)),e.h+=n.length)}function lu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ia=au.prototype).add=function(e,t){ou(this),this.i=null,e=lu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ia.forEach=function(e,t){ou(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ia.ta=function(){ou(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ia.Z=function(e){ou(this);var t=[];if("string"==typeof e)uu(this,e)&&(t=t.concat(this.g.get(lu(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ia.set=function(e,t){return ou(this),this.i=null,uu(this,e=lu(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ia.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Ia.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var hu=b((function e(t,n){w(this,e),this.g=t,this.map=n}));function fu(e){this.l=e||du,Ca.PerformanceNavigationTiming?e=0<(e=Ca.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ca.g&&Ca.g.Ka&&Ca.g.Ka()&&Ca.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var du=10;function pu(e){return!!e.h||!!e.g&&e.g.size>=e.j}function vu(e){return e.h?1:e.g?e.g.size:0}function gu(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function yu(e,t){e.g?e.g.add(t):e.h=t}function mu(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function wu(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=u(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Ba(e.i)}fu.prototype.cancel=function(){if(this.i=wu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=u(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var ku=function(){return b((function e(){w(this,e)}),[{key:"stringify",value:function(e){return Ca.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Ca.JSON.parse(e,void 0)}}])}();function bu(){this.g=new ku}function _u(e,t,n){var r=n||"";try{zs(e,(function(e,n){var i=e;Na(e)&&(i=Fo(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Eu(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Tu(e){this.l=e.ec||null,this.j=e.ob||!1}function Iu(e,t){Mo.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=xu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ua(Tu,ms),Tu.prototype.g=function(){return new Iu(this.l,this.j)},Tu.prototype.i=function(e){return function(){return e}}({}),Ua(Iu,Mo);var xu=0;function Su(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Au(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Cu(e)}function Cu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ia=Iu.prototype).open=function(e,t){if(this.readyState!=xu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Cu(this)},Ia.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Ca).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Ia.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Au(this)),this.readyState=xu},Ia.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Cu(this)),this.g&&(this.readyState=3,Cu(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Ca.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Su(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Ia.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Au(this):Cu(this),3==this.readyState&&Su(this)}},Ia.Za=function(e){this.g&&(this.response=this.responseText=e,Au(this))},Ia.Ya=function(e){this.g&&(this.response=e,Au(this))},Ia.ka=function(){this.g&&Au(this)},Ia.setRequestHeader=function(e,t){this.v.append(e,t)},Ia.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ia.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Iu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Du=Ca.JSON.parse;function Nu(e){Mo.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ou,this.L=this.M=!1}Ua(Nu,Mo);var Ou="",Pu=/^https?$/i,Mu=["POST","PUT"];function Lu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ru(e),Uu(e)}function Ru(e){e.F||(e.F=!0,Lo(e,"complete"),Lo(e,"error"))}function Fu(e){if(e.h&&void 0!==Aa&&(!e.C[1]||4!=ju(e)||2!=e.da()))if(e.v&&4==ju(e))Jo(e.La,0,e);else if(Lo(e,"readystatechange"),4==ju(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(qs)[1]||null;!a&&Ca.self&&Ca.self.location&&(a=Ca.self.location.protocol.slice(0,-1)),i=!Pu.test(a?a.toLowerCase():"")}t=i}if(t)Lo(e,"complete"),Lo(e,"success");else{e.m=6;try{var o=2<ju(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Ru(e)}}finally{Uu(e)}}}function Uu(e,t){if(e.g){Vu(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Lo(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Vu(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Ca.clearTimeout(e.A),e.A=null)}function ju(e){return e.g?e.g.readyState:0}function Bu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ou:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Gc){return null}}function zu(e){var t="";return yo(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function qu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zu(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Qs(e,t,n))}function Ku(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Hu(e){this.Ga=0,this.j=[],this.l=new as,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ku("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ku("baseRetryDelayMs",5e3,e),this.hb=Ku("retryDelaySeedMs",1e4,e),this.eb=Ku("forwardChannelMaxRetries",2,e),this.xa=Ku("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new fu(e&&e.concurrentRequestLimit),this.Ja=new bu,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Gu(e){if(Wu(e),3==e.H){var t=e.W++,n=Hs(e.I);if(Qs(n,"SID",e.K),Qs(n,"RID",t),Qs(n,"TYPE","terminate"),Xu(e,n),(t=new xs(e,e.l,t)).L=2,t.v=Ys(Hs(n)),n=!1,Ca.navigator&&Ca.navigator.sendBeacon)try{n=Ca.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Ca.Image&&((new Image).src=t.v,n=!0),n||(t.g=cc(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Rs(t)}sc(e)}function $u(e){e.g&&(tc(e),e.g.cancel(),e.g=null)}function Wu(e){$u(e),e.u&&(Ca.clearTimeout(e.u),e.u=null),rc(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Ca.clearTimeout(e.m),e.m=null)}function Qu(e){if(!pu(e.i)&&!e.m){e.m=!0;var t=e.Na;Ho||Wo(),Go||(Ho(),Go=!0),$o.add(t,e),e.C=0}}function Yu(e,t){var n;n=t?t.m:e.W++;var r=Hs(e.I);Qs(r,"SID",e.K),Qs(r,"RID",n),Qs(r,"AID",e.V),Xu(e,r),e.o&&e.s&&qu(r,e.o,e.s),n=new xs(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ju(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),yu(e.i,n),Ns(n,r,t)}function Xu(e,t){e.na&&yo(e.na,(function(e,n){Qs(t,n,e)})),e.h&&zs({},(function(e,n){Qs(t,n,e)}))}function Ju(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ra(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{_u(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Zu(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ho||Wo(),Go||(Ho(),Go=!0),$o.add(t,e),e.A=0}}function ec(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=vs(Ra(e.Ma,e),ac(e,e.A)),e.A++,!0)}function tc(e){null!=e.B&&(Ca.clearTimeout(e.B),e.B=null)}function nc(e){e.g=new xs(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Hs(e.wa);Qs(t,"RID","rpc"),Qs(t,"SID",e.K),Qs(t,"AID",e.V),Qs(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Qs(t,"TO",e.qa),Qs(t,"TYPE","xmlhttp"),Xu(e,t),e.o&&e.s&&qu(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Ys(Hs(t)),n.s=null,n.S=!0,Os(n,e)}function rc(e){null!=e.v&&(Ca.clearTimeout(e.v),e.v=null)}function ic(e,t){var n=null;if(e.g==t){rc(e),tc(e),e.g=null;var r=2}else{if(!gu(e.i,t))return;n=t.F,mu(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Lo(r=cs(),new ps(r,n)),Qu(e)}else Zu(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(vu(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=vs(Ra(e.Na,e,t),ac(e,e.C)),e.C++,0)))}(e,t)||2==r&&ec(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:oc(e,5);break;case 4:oc(e,10);break;case 3:oc(e,6);break;default:oc(e,2)}}function ac(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function oc(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Ra(e.pb,e);n||(n=new Ks("//www.google.com/images/cleardot.gif"),Ca.location&&"http"==Ca.location.protocol||Gs(n,"https"),Ys(n)),function(e,t){var n=new as;if(Ca.Image){var r=new Image;r.onload=Fa(Eu,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Fa(Eu,n,r,"TestLoadImage: error",!1,t),r.onabort=Fa(Eu,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Fa(Eu,n,r,"TestLoadImage: timeout",!1,t),Ca.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ds(2);e.H=0,e.h&&e.h.za(t),sc(e),Wu(e)}function sc(e){if(e.H=0,e.ma=[],e.h){var t=wu(e.i);0==t.length&&0==e.j.length||(za(e.ma,t),za(e.ma,e.j),e.i.i.length=0,Ba(e.j),e.j.length=0),e.h.ya()}}function uc(e,t,n){var r=n instanceof Ks?Hs(n):new Ks(n);if(""!=r.g)t&&(r.g=t+"."+r.g),$s(r,r.m);else{var i=Ca.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Ks(null);r&&Gs(a,r),t&&(a.g=t),i&&$s(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Qs(r,n,t),Qs(r,"VER",e.ra),Xu(e,r),r}function cc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Nu(new Tu({ob:!0})):new Nu(e.va)).Oa(e.J),t}function lc(){}function hc(){if(Za&&!(10<=Number(co)))throw Error("Environmental error: no available transport.")}function fc(e,t){Mo.call(this),this.g=new Hu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ha(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ha(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vc(this)}function dc(e){Es.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function pc(){Ts.call(this),this.status=1}function vc(e){this.g=e}function gc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function yc(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function mc(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Ia=Nu.prototype).Oa=function(e){this.M=e},Ia.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():bs.g(),this.C=this.u?ws(this.u):ws(bs),this.g.onreadystatechange=Ra(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(c){return void Lu(this,c)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=u(r.keys());try{for(o.s();!(a=o.n()).done;){var c=a.value;n.set(c,r.get(c))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Ca.FormData&&e instanceof Ca.FormData,!(0<=ja(Mu,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var l,h=u(n);try{for(h.s();!(l=h.n()).done;){var f=s(l.value,2),d=f[0],p=f[1];this.g.setRequestHeader(d,p)}}catch(v){h.e(v)}finally{h.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Vu(this),0<this.B&&((this.L=function(e){return Za&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ra(this.ua,this)):this.A=Jo(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(c){Lu(this,c)}},Ia.ua=function(){void 0!==Aa&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lo(this,"timeout"),this.abort(8))},Ia.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Lo(this,"complete"),Lo(this,"abort"),Uu(this))},Ia.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Uu(this,!0)),Nu.$.N.call(this)},Ia.La=function(){this.s||(this.G||this.v||this.l?Fu(this):this.kb())},Ia.kb=function(){Fu(this)},Ia.isActive=function(){return!!this.g},Ia.da=function(){try{return 2<ju(this)?this.g.status:-1}catch(Ya){return-1}},Ia.ja=function(){try{return this.g?this.g.responseText:""}catch(Ya){return""}},Ia.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Du(t)}},Ia.Ia=function(){return this.m},Ia.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ia=Hu.prototype).ra=8,Ia.H=1,Ia.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new xs(this,this.l,e),n=this.s;if(this.U&&(n?ko(n=mo(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"==typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ju(this,t,r),Qs(i=Hs(this.I),"RID",e),Qs(i,"CVER",22),this.F&&Qs(i,"X-HTTP-Session-Id",this.F),Xu(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(zu(n)))+"&"+r:this.o&&qu(i,this.o,n)),yu(this.i,t),this.bb&&Qs(i,"TYPE","init"),this.P?(Qs(i,"$req",r),Qs(i,"SID","null"),t.aa=!0,Ns(t,i,null)):Ns(t,i,r),this.H=2}}else 3==this.H&&(e?Yu(this,e):0==this.j.length||pu(this.i)||Yu(this))},Ia.Ma=function(){if(this.u=null,nc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=vs(Ra(this.jb,this),e)}},Ia.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ds(10),$u(this),nc(this))},Ia.ib=function(){null!=this.v&&(this.v=null,$u(this),ec(this),ds(19))},Ia.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ds(2)):(this.l.info("Failed to ping google.com"),ds(1))},Ia.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ia=lc.prototype).Ba=function(){},Ia.Aa=function(){},Ia.za=function(){},Ia.ya=function(){},Ia.isActive=function(){return!0},Ia.Va=function(){},hc.prototype.g=function(e,t){return new fc(e,t)},Ua(fc,Mo),fc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ds(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=uc(e,null,e.Y),Qu(e)},fc.prototype.close=function(){Gu(this.g)},fc.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Fo(e),e=n);t.j.push(new hu(t.fb++,e)),3==t.H&&Qu(t)},fc.prototype.N=function(){this.g.h=null,delete this.j,Gu(this.g),delete this.g,fc.$.N.call(this)},Ua(dc,Es),Ua(pc,Ts),Ua(vc,lc),vc.prototype.Ba=function(){Lo(this.g,"a")},vc.prototype.Aa=function(e){Lo(this.g,new dc(e))},vc.prototype.za=function(e){Lo(this.g,new pc)},vc.prototype.ya=function(){Lo(this.g,"b")},Ua(gc,(function(){this.blockSize=-1})),gc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},gc.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)yc(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){yc(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){yc(this,r),i=0;break}}this.h=i,this.i+=t},gc.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var wc={};function kc(e){return-128<=e&&128>e?function(e,t){var n=wc;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new mc([0|e],0>e?-1:0)})):new mc([0|e],0>e?-1:0)}function bc(e){if(isNaN(e)||!isFinite(e))return Ec;if(0>e)return Ac(bc(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=_c;return new mc(t,0)}var _c=4294967296,Ec=kc(0),Tc=kc(1),Ic=kc(16777216);function xc(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Sc(e){return-1==e.h}function Ac(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new mc(n,~e.h).add(Tc)}function Cc(e,t){return e.add(Ac(t))}function Dc(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Nc(e,t){this.g=e,this.h=t}function Oc(e,t){if(xc(t))throw Error("division by zero");if(xc(e))return new Nc(Ec,Ec);if(Sc(e))return t=Oc(Ac(e),t),new Nc(Ac(t.g),Ac(t.h));if(Sc(t))return t=Oc(e,Ac(t)),new Nc(Ac(t.g),t.h);if(30<e.g.length){if(Sc(e)||Sc(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Tc,r=t;0>=r.X(e);)n=Pc(n),r=Pc(r);var i=Mc(n,1),a=Mc(r,1);for(r=Mc(r,2),n=Mc(n,2);!xc(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Mc(r,1),n=Mc(n,1)}return t=Cc(e,i.R(t)),new Nc(i,t)}for(i=Ec;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=bc(n)).R(t);Sc(o)||0<o.X(e);)o=(a=bc(n-=r)).R(t);xc(a)&&(a=Tc),i=i.add(a),e=Cc(e,o)}return new Nc(i,e)}function Pc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new mc(n,e.h)}function Mc(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new mc(i,e.h)}(Ia=mc.prototype).ea=function(){if(Sc(this))return-Ac(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:_c+r)*t,t*=_c}return e},Ia.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(xc(this))return"0";if(Sc(this))return"-"+Ac(this).toString(e);for(var t=bc(Math.pow(e,6)),n=this,r="";;){var i=Oc(n,t).g,a=((0<(n=Cc(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(xc(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Ia.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Ia.X=function(e){return Sc(e=Cc(this,e))?-1:xc(e)?0:1},Ia.abs=function(){return Sc(this)?Ac(this):this},Ia.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new mc(n,-2147483648&n[n.length-1]?-1:0)},Ia.R=function(e){if(xc(this)||xc(e))return Ec;if(Sc(this))return Sc(e)?Ac(this).R(Ac(e)):Ac(Ac(this).R(e));if(Sc(e))return Ac(this.R(Ac(e)));if(0>this.X(Ic)&&0>e.X(Ic))return bc(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,Dc(n,2*r+2*i),n[2*r+2*i+1]+=a*u,Dc(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,Dc(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,Dc(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new mc(n,0)},Ia.gb=function(e){return Oc(this,e).h},Ia.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new mc(n,this.h&e.h)},Ia.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new mc(n,this.h|e.h)},Ia.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new mc(n,this.h^e.h)},hc.prototype.createWebChannel=hc.prototype.g,fc.prototype.send=fc.prototype.u,fc.prototype.open=fc.prototype.m,fc.prototype.close=fc.prototype.close,gs.NO_ERROR=0,gs.TIMEOUT=8,gs.HTTP_ERROR=6,ys.COMPLETE="complete",ks.EventType=_s,_s.OPEN="a",_s.CLOSE="b",_s.ERROR="c",_s.MESSAGE="d",Mo.prototype.listen=Mo.prototype.O,Nu.prototype.listenOnce=Nu.prototype.P,Nu.prototype.getLastError=Nu.prototype.Sa,Nu.prototype.getLastErrorCode=Nu.prototype.Ia,Nu.prototype.getStatus=Nu.prototype.da,Nu.prototype.getResponseJson=Nu.prototype.Wa,Nu.prototype.getResponseText=Nu.prototype.ja,Nu.prototype.send=Nu.prototype.ha,Nu.prototype.setWithCredentials=Nu.prototype.Oa,gc.prototype.digest=gc.prototype.l,gc.prototype.reset=gc.prototype.reset,gc.prototype.update=gc.prototype.j,mc.prototype.add=mc.prototype.add,mc.prototype.multiply=mc.prototype.R,mc.prototype.modulo=mc.prototype.gb,mc.prototype.compare=mc.prototype.X,mc.prototype.toNumber=mc.prototype.ea,mc.prototype.toString=mc.prototype.toString,mc.prototype.getBits=mc.prototype.D,mc.fromNumber=bc,mc.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Ac(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=bc(Math.pow(n,8)),i=Ec,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=bc(Math.pow(n,o)),i=i.R(o).add(bc(s))):i=(i=i.R(r)).add(bc(s))}return i};var Lc=gs,Rc=ys,Fc=ss,Uc=10,Vc=11,jc=ks,Bc=Nu,zc=mc,qc="@firebase/firestore",Kc=function(){return b((function e(t){w(this,e),this.uid=t}),[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}])}();Kc.UNAUTHENTICATED=new Kc(null),Kc.GOOGLE_CREDENTIALS=new Kc("google-credentials-uid"),Kc.FIRST_PARTY=new Kc("first-party-uid"),Kc.MOCK_USER=new Kc("mock-user");
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
var Hc="10.4.0",Gc=new be("@firebase/firestore");
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function $c(){return Gc.logLevel}function Wc(e){if(Gc.logLevel<=de.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(Xc);Gc.debug.apply(Gc,["Firestore (".concat(Hc,"): ").concat(e)].concat(i(a)))}}function Qc(e){if(Gc.logLevel<=de.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(Xc);Gc.error.apply(Gc,["Firestore (".concat(Hc,"): ").concat(e)].concat(i(a)))}}function Yc(e){if(Gc.logLevel<=de.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(Xc);Gc.warn.apply(Gc,["Firestore (".concat(Hc,"): ").concat(e)].concat(i(a)))}}function Xc(e){if("string"==typeof e)return e;try{
/**
          * @license
          * Copyright 2020 Google LLC
          *
          * Licensed under the Apache License, Version 2.0 (the "License");
          * you may not use this file except in compliance with the License.
          * You may obtain a copy of the License at
          *
          *   http://www.apache.org/licenses/LICENSE-2.0
          *
          * Unless required by applicable law or agreed to in writing, software
          * distributed under the License is distributed on an "AS IS" BASIS,
          * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
          * See the License for the specific language governing permissions and
          * limitations under the License.
          */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Jc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Hc,") INTERNAL ASSERTION FAILED: ")+e;throw Qc(t),new Error(t)}function Zc(e,t){e||Jc()}function el(e,t){return e}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var tl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},nl=function(e){function t(e,n){var r;return w(this,t),(r=f(this,t,[e,n])).code=e,r.message=n,r.toString=function(){return"".concat(r.name,": [code=").concat(r.code,"]: ").concat(r.message)},r}return d(t,e),b(t)}(Z),rl=b((function e(){var t=this;w(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),il=b((function e(t,n){w(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),al=function(){return b((function e(){w(this,e)}),[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Kc.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}])}(),ol=function(){return b((function e(t){w(this,e),this.token=t,this.changeListener=null}),[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}])}(),sl=function(){return b((function e(t){w(this,e),this.t=t,this.currentUser=Kc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}),[{key:"start",value:function(e,t){var n=this,i=this.i,a=function(e){return n.i!==i?(i=n.i,t(e)):Promise.resolve()},s=new rl;this.o=function(){n.i++,n.currentUser=n.u(),s.resolve(),s=new rl,e.enqueueRetryable((function(){return a(n.currentUser)}))};var u=function(){var t=s;e.enqueueRetryable(o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){Wc("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(Wc("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rl)}}),0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Wc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Zc("string"==typeof n.accessToken),new il(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Zc(null===e||"string"==typeof e),new Kc(e)}}])}(),ul=function(){return b((function e(t,n,r){w(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Kc.FIRST_PARTY,this.I=new Map}),[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}])}(),cl=function(){return b((function e(t,n,r){w(this,e),this.l=t,this.h=n,this.P=r}),[{key:"getToken",value:function(){return Promise.resolve(new ul(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Kc.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}])}(),ll=b((function e(t){w(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),hl=function(){return b((function e(t){w(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}),[{key:"start",value:function(e,t){var n=this;this.o=function(r){e.enqueueRetryable((function(){return function(e){null!=e.error&&Wc("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,Wc("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()}(r)}))};var r=function(e){Wc("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?r(e):Wc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Zc("string"==typeof t.token),e.R=t.token,new ll(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}])}();
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function fl(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var dl=function(){return b((function e(){w(this,e)}),null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=fl(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}])}();function pl(e,t){return e<t?-1:e>t?1:0}function vl(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var gl=function(){function e(t,n){if(w(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new nl(tl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new nl(tl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new nl(tl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nl(tl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return b(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?pl(this.nanoseconds,e.nanoseconds):pl(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}])}(),yl=function(){function e(t){w(this,e),this.timestamp=t}return b(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new gl(0,0))}},{key:"max",value:function(){return new e(new gl(253402300799,999999999))}}])}(),ml=function(){function e(t,n,r){w(this,e),void 0===n?n=0:n>t.length&&Jc(),void 0===r?r=t.length-n:r>t.length-n&&Jc(),this.segments=t,this.offset=n,this.len=r}return b(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}])}(),wl=function(e){function t(){return w(this,t),f(this,t,arguments)}return d(t,e),b(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];for(var o=0,s=r;o<s.length;o++){var u=s[o];if(u.indexOf("//")>=0)throw new nl(tl.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,i(u.split("/").filter((function(e){return e.length>0}))))}return new t(e)}},{key:"emptyPath",value:function(){return new t([])}}])}(ml),kl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bl=function(e){function t(){return w(this,t),f(this,t,arguments)}return d(t,e),b(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return kl.test(e)}},{key:"keyField",value:function(){return new t(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var n=[],r="",i=0,a=function(){if(0===r.length)throw new nl(tl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));n.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new nl(tl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new nl(tl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new nl(tl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}},{key:"emptyPath",value:function(){return new t([])}}])}(ml),_l=function(){function e(t){w(this,e),this.path=t}return b(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===wl.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(wl.fromString(t))}},{key:"fromName",value:function(t){return new e(wl.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(wl.emptyPath())}},{key:"comparator",value:function(e,t){return wl.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new wl(t.slice()))}}])}();
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function El(e){return new Tl(e.readTime,e.key,-1)}var Tl=function(){function e(t,n,r){w(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return b(e,null,[{key:"min",value:function(){return new e(yl.min(),_l.empty(),-1)}},{key:"max",value:function(){return new e(yl.max(),_l.empty(),-1)}}])}();function Il(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=_l.comparator(e.documentKey,t.documentKey))?n:pl(e.largestBatchId,t.largestBatchId)
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}var xl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sl=function(){return b((function e(){w(this,e),this.onCommittedListeners=[]}),[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}])}();
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function Al(e){return Cl.apply(this,arguments)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Cl(){return(Cl=o(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===tl.FAILED_PRECONDITION&&t.message===xl){e.next=2;break}throw t;case 2:Wc("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dl=function(){function e(t){var n=this;w(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return b(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Jc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=u(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){var i=function(){!0===t()?n().next((function(){i()}),r):e()};i()}))}}])}();function Nl(e){return"IndexedDbTransactionError"===e.name}
/**
       * @license
       * Copyright 2018 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Ol=function(){return b((function e(t,n){var r=this;w(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}),[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}])}();function Pl(e){return null==e}function Ml(e){return 0===e&&1/e==-1/0}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function Ll(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rl(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Fl(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */Ol.ae=-1;var Ul=function(){function e(t,n){w(this,e),this.comparator=t,this.root=n||jl.EMPTY}return b(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,jl.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,jl.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Vl(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Vl(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Vl(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Vl(this.root,e,this.comparator,!0)}}])}(),Vl=function(){return b((function e(t,n,r,i){w(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}),[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}])}(),jl=function(){function e(t,n,r,i,a){w(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return b(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Jc();if(this.right.isRed())throw Jc();var e=this.left.check();if(e!==this.right.check())throw Jc();return e+(this.isRed()?0:1)}}])}();jl.EMPTY=null,jl.RED=!0,jl.BLACK=!1,jl.EMPTY=new(function(){return b((function e(){w(this,e),this.size=0}),[{key:"key",get:function(){throw Jc()}},{key:"value",get:function(){throw Jc()}},{key:"color",get:function(){throw Jc()}},{key:"left",get:function(){throw Jc()}},{key:"right",get:function(){throw Jc()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new jl(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}])}());
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
var Bl=function(){function e(t){w(this,e),this.comparator=t,this.data=new Ul(this.comparator)}return b(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new zl(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new zl(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}])}(),zl=function(){return b((function e(t){w(this,e),this.iter=t}),[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}])}(),ql=function(){function e(t){w(this,e),this.fields=t,t.sort(bl.comparator)}return b(e,[{key:"unionWith",value:function(t){var n,r=new Bl(bl.comparator),i=u(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,s=u(t);try{for(s.s();!(o=s.n()).done;){var c=o.value;r=r.add(c)}}catch(l){s.e(l)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=u(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return vl(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}])}(),Kl=function(e){function t(){var e;return w(this,t),(e=f(this,t,arguments)).name="Base64DecodeError",e}return d(t,e),b(t)}(p(Error)),Hl=function(){function e(t){w(this,e),this.binaryString=t}return b(e,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return pl(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Kl("Invalid base64 string: "+t):t}}(t))}},{key:"fromUint8Array",value:function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}}])}();Hl.EMPTY_BYTE_STRING=new Hl("");var Gl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $l(e){if(Zc(!!e),"string"==typeof e){var t=0,n=Gl.exec(e);if(Zc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Wl(e.seconds),nanos:Wl(e.nanos)}}function Wl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ql(e){return"string"==typeof e?Hl.fromBase64String(e):Hl.fromUint8Array(e)}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Yl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xl(e){var t=e.mapValue.fields.__previous_value__;return Yl(t)?Xl(t):t}function Jl(e){var t=$l(e.mapValue.fields.__local_write_time__.timestampValue);return new gl(t.seconds,t.nanos)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Zl=b((function e(t,n,r,i,a,o,s,u,c){w(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),eh=function(){function e(t,n){w(this,e),this.projectId=t,this.database=n||"(default)"}return b(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}])}(),th={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function nh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Yl(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e)?9007199254740991:10:Jc()}function rh(e,t){if(e===t)return!0;var n,r=nh(e);if(r!==nh(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Jl(e).isEqual(Jl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=$l(e.timestampValue),r=$l(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,Ql(e.bytesValue).isEqual(Ql(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Wl(e.geoPointValue.latitude)===Wl(t.geoPointValue.latitude)&&Wl(e.geoPointValue.longitude)===Wl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Wl(e.integerValue)===Wl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Wl(e.doubleValue),r=Wl(t.doubleValue);return n===r?Ml(n)===Ml(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return vl(e.arrayValue.values||[],t.arrayValue.values||[],rh);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ll(n)!==Ll(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!rh(n[i],r[i])))return!1;return!0}(e,t);default:return Jc()}}function ih(e,t){return void 0!==(e.values||[]).find((function(e){return rh(e,t)}))}function ah(e,t){if(e===t)return 0;var n,r,i,a,o=nh(e),s=nh(t);if(o!==s)return pl(o,s);switch(o){case 0:case 9007199254740991:return 0;case 1:return pl(e.booleanValue,t.booleanValue);case 2:return r=t,i=Wl((n=e).integerValue||n.doubleValue),a=Wl(r.integerValue||r.doubleValue),i<a?-1:i>a?1:i===a?0:isNaN(i)?isNaN(a)?0:-1:1;case 3:return oh(e.timestampValue,t.timestampValue);case 4:return oh(Jl(e),Jl(t));case 5:return pl(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Ql(e),r=Ql(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=pl(n[i],r[i]);if(0!==a)return a}return pl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=pl(Wl(e.latitude),Wl(t.latitude));return 0!==n?n:pl(Wl(e.longitude),Wl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ah(n[i],r[i]);if(a)return a}return pl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===th.mapValue&&t===th.mapValue)return 0;if(e===th.mapValue)return 1;if(t===th.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=pl(r[o],a[o]);if(0!==s)return s;var u=ah(n[r[o]],i[a[o]]);if(0!==u)return u}return pl(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Jc()}}function oh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return pl(e,t);var n=$l(e),r=$l(t),i=pl(n.seconds,r.seconds);return 0!==i?i:pl(n.nanos,r.nanos)}function sh(e){return uh(e)}function uh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(t=e.timestampValue,n=$l(t),"time(".concat(n.seconds,",").concat(n.nanos,")")):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ql(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return _l.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=u(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=uh(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=u(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(uh(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Jc();var t,n}function ch(e){return!!e&&"integerValue"in e}function lh(e){return!!e&&"arrayValue"in e}function hh(e){return!!e&&"mapValue"in e}function fh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==h(e.timestampValue))return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Rl(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=fh(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=fh(e.arrayValue.values[r]);return n}return Object.assign({},e)}var dh=function(){function e(t){w(this,e),this.value=t}return b(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!hh(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fh(t)}},{key:"setAll",value:function(e){var t=this,n=bl.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=fh(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return rh(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];hh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Rl(t,(function(t,n){return e[t]=n}));var r,i=u(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(fh(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}])}();function ph(e){var t=[];return Rl(e.fields,(function(e,n){var r=new bl([e]);if(hh(n)){var i=ph(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=u(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(c){o.e(c)}finally{o.f()}}}else t.push(r)})),new ql(t)
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}var vh=function(){function e(t,n,r,i,a,o,s){w(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return b(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(yl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=dh.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=dh.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=yl.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,yl.min(),yl.min(),yl.min(),dh.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,yl.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,yl.min(),yl.min(),dh.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,yl.min(),yl.min(),dh.empty(),2)}}])}(),gh=b((function e(t,n){w(this,e),this.position=t,this.inclusive=n}));
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function yh(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?_l.comparator(_l.fromName(o.referenceValue),n.key):ah(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function mh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!rh(e.position[n],t.position[n]))return!1;return!0}
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var wh=b((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";w(this,e),this.field=t,this.dir=n}));function kh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var bh=b((function e(){w(this,e)})),_h=function(e){function t(e,n,r){var i;return w(this,t),(i=f(this,t)).field=e,i.op=n,i.value=r,i}return d(t,e),b(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ah(t,this.value)):null!==t&&nh(this.value)===nh(t)&&this.matchesComparison(ah(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Jc()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new Ch(e,n,r):"array-contains"===n?new Ph(e,r):"in"===n?new Mh(e,r):"not-in"===n?new Lh(e,r):"array-contains-any"===n?new Rh(e,r):new t(e,n,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Dh(e,n):new Nh(e,n)}}])}(bh),Eh=function(e){function t(e,n){var r;return w(this,t),(r=f(this,t)).filters=e,r.op=n,r.ce=null,r}return d(t,e),b(t,[{key:"matches",value:function(e){return Th(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=u(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,n){return new t(e,n)}}])}(bh);function Th(e){return"and"===e.op}function Ih(e){return function(e){var t,n=u(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Eh)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}(e)&&Th(e)}function xh(e){if(e instanceof _h)return e.field.canonicalString()+e.op.toString()+sh(e.value);if(Ih(e))return e.filters.map((function(e){return xh(e)})).join(",");var t=e.filters.map((function(e){return xh(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Sh(e,t){return e instanceof _h?(n=e,(r=t)instanceof _h&&n.op===r.op&&n.field.isEqual(r.field)&&rh(n.value,r.value)):e instanceof Eh?function(e,t){return t instanceof Eh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Sh(n,t.filters[r])}),!0)}(e,t):void Jc();var n,r}function Ah(e){return e instanceof _h?"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(sh(t.value)):e instanceof Eh?function(e){return e.op.toString()+" {"+e.getFilters().map(Ah).join(" ,")+"}"}(e):"Filter";var t}var Ch=function(e){function t(e,n,r){var i;return w(this,t),(i=f(this,t,[e,n,r])).key=_l.fromName(r.referenceValue),i}return d(t,e),b(t,[{key:"matches",value:function(e){var t=_l.comparator(e.key,this.key);return this.matchesComparison(t)}}])}(_h),Dh=function(e){function t(e,n){var r;return w(this,t),(r=f(this,t,[e,"in",n])).keys=Oh("in",n),r}return d(t,e),b(t,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}])}(_h),Nh=function(e){function t(e,n){var r;return w(this,t),(r=f(this,t,[e,"not-in",n])).keys=Oh("not-in",n),r}return d(t,e),b(t,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}])}(_h);function Oh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return _l.fromName(e.referenceValue)}))}var Ph=function(e){function t(e,n){return w(this,t),f(this,t,[e,"array-contains",n])}return d(t,e),b(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return lh(t)&&ih(t.arrayValue,this.value)}}])}(_h),Mh=function(e){function t(e,n){return w(this,t),f(this,t,[e,"in",n])}return d(t,e),b(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ih(this.value.arrayValue,t)}}])}(_h),Lh=function(e){function t(e,n){return w(this,t),f(this,t,[e,"not-in",n])}return d(t,e),b(t,[{key:"matches",value:function(e){if(ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ih(this.value.arrayValue,t)}}])}(_h),Rh=function(e){function t(e,n){return w(this,t),f(this,t,[e,"array-contains-any",n])}return d(t,e),b(t,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!lh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ih(t.value.arrayValue,e)}))}}])}(_h),Fh=b((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;w(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.he=null}));function Uh(e){return new Fh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Vh(e){var t=el(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return xh(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return(t=e).field.canonicalString()+t.dir;var t})).join(","),Pl(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return sh(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return sh(e)})).join(",")),t.he=n}return t.he}function jh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!kh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Sh(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!mh(e.startAt,t.startAt)&&mh(e.endAt,t.endAt)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Bh=b((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;w(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}));function zh(e){return new Bh(e)}function qh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Kh(e){var t=el(e);if(null===t.Pe){t.Pe=[];var n=function(e){var t,n=u(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}(t),r=function(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new wh(n)),t.Pe.push(new wh(bl.keyField(),"asc"));else{var i,a=!1,o=u(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.Pe.push(s),s.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var c=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new wh(bl.keyField(),c))}}}return t.Pe}function Hh(e){var t=el(e);return t.Ie||(t.Ie=function(e,t){if("F"===e.limitType)return Uh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new wh(e.field,t)}));var n=e.endAt?new gh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new gh(e.startAt.position,e.startAt.inclusive):null;return Uh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}(t,Kh(e))),t.Ie}function Gh(e,t,n){return new Bh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $h(e,t){return jh(Hh(e),Hh(t))&&e.limitType===t.limitType}function Wh(e){return"".concat(Vh(Hh(e)),"|lt:").concat(e.limitType)}function Qh(e){return"Query(target=".concat((t=Hh(e),n=t.path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: [".concat(t.filters.map((function(e){return Ah(e)})).join(", "),"]")),Pl(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: [".concat(t.orderBy.map((function(e){return"".concat((t=e).field.canonicalString()," (").concat(t.dir,")");var t})).join(", "),"]")),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return sh(e)})).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return sh(e)})).join(",")),"Target(".concat(n,")")),"; limitType=").concat(e.limitType,")");var t,n}function Yh(e,t){return t.isFoundDocument()&&(n=e,i=(r=t).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):_l.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(e,t){var n,r=u(Kh(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=u(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=yh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Kh(e),t))&&!(e.endAt&&!function(e,t,n){var r=yh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Kh(e),t))}(e,t);var n,r,i}function Xh(e,t,n){var r,i,a,o,s=e.field.isKeyField()?_l.comparator(t.key,n.key):(r=e.field,i=n,a=t.data.field(r),o=i.data.field(r),null!==a&&null!==o?ah(a,o):Jc());switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return Jc()}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Jh=function(){return b((function e(t,n){w(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}),[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=u(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],c=a[1];if(this.equalsFn(o,e))return c}}catch(l){i.e(l)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Rl(this.inner,(function(t,n){var r,i=u(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],c=a[1];e(o,c)}}catch(l){i.e(l)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Fl(this.inner)}},{key:"size",value:function(){return this.innerSize}}])}(),Zh=new Ul(_l.comparator);
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function ef(){return Zh}var tf=new Ul(_l.comparator);function nf(){for(var e=tf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function rf(e){var t=tf;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function af(){return sf()}function of(){return sf()}function sf(){return new Jh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var uf=new Ul(_l.comparator),cf=new Bl(_l.comparator);function lf(){for(var e=cf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var hf=new Bl(pl);
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function ff(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ml(t)?"-0":t}}function df(e){return{integerValue:""+e}}function pf(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Ml(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?df(t):ff(e,t)}
/**
       * @license
       * Copyright 2018 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var vf=b((function e(){w(this,e),this._=void 0}));function gf(e,t,n){return e instanceof wf?(i=t,a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&Yl(i)&&(i=Xl(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}):e instanceof kf?bf(e,t):e instanceof _f?Ef(e,t):function(e,t){var n=mf(e,t),r=If(n)+If(e.Te);return ch(n)&&ch(e.Te)?df(r):ff(e.serializer,r)}(e,t);var r,i,a}function yf(e,t,n){return e instanceof kf?bf(e,t):e instanceof _f?Ef(e,t):n}function mf(e,t){return e instanceof Tf?ch(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}var wf=function(e){function t(){return w(this,t),f(this,t,arguments)}return d(t,e),b(t)}(vf),kf=function(e){function t(e){var n;return w(this,t),(n=f(this,t)).elements=e,n}return d(t,e),b(t)}(vf);function bf(e,t){var n,r=xf(t),i=u(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return rh(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var _f=function(e){function t(e){var n;return w(this,t),(n=f(this,t)).elements=e,n}return d(t,e),b(t)}(vf);function Ef(e,t){var n,r=xf(t),i=u(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!rh(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Tf=function(e){function t(e,n){var r;return w(this,t),(r=f(this,t)).serializer=e,r.Te=n,r}return d(t,e),b(t)}(vf);function If(e){return Wl(e.integerValue||e.doubleValue)}function xf(e){return lh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Sf=b((function e(t,n){w(this,e),this.version=t,this.transformResults=n})),Af=function(){function e(t,n){w(this,e),this.updateTime=t,this.exists=n}return b(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}])}();function Cf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Df=b((function e(){w(this,e)}));function Nf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qf(e.key,Af.none()):new Rf(e.key,e.data,Af.none());var n,r=e.data,i=dh.empty(),a=new Bl(bl.comparator),o=u(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var c=r.field(s);null===c&&s.length>1&&(s=s.popLast(),c=r.field(s)),null===c?i.delete(s):i.set(s,c),a=a.add(s)}}}catch(l){o.e(l)}finally{o.f()}return new Ff(e.key,i,new ql(a.toArray()),Af.none())}function Of(e,t,n){var r;e instanceof Rf?function(e,t,n){var r=e.value.clone(),i=Vf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ff?function(e,t,n){if(Cf(e.precondition,t)){var r=Vf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Uf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function Pf(e,t,n,r){return e instanceof Rf?function(e,t,n,r){if(!Cf(e.precondition,t))return n;var i=e.value.clone(),a=jf(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ff?function(e,t,n,r){if(!Cf(e.precondition,t))return n;var i=jf(e.fieldTransforms,r,t),a=t.data;return a.setAll(Uf(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):(i=t,a=n,Cf(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a);var i,a}function Mf(e,t){var n,r=null,i=u(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=mf(a.transform,o||null);null!=s&&(null===r&&(r=dh.empty()),r.set(a.field,s))}}catch(c){i.e(c)}finally{i.f()}return r||null}function Lf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&vl(n,r,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof kf&&r instanceof kf||n instanceof _f&&r instanceof _f?vl(n.elements,r.elements,rh):n instanceof Tf&&r instanceof Tf?rh(n.Te,r.Te):n instanceof wf&&r instanceof wf);var n,r}(e,t)}))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}var Rf=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return w(this,t),(i=f(this,t)).key=e,i.value=n,i.precondition=r,i.fieldTransforms=a,i.type=0,i}return d(t,e),b(t,[{key:"getFieldMask",value:function(){return null}}])}(Df),Ff=function(e){function t(e,n,r,i){var a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return w(this,t),(a=f(this,t)).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return d(t,e),b(t,[{key:"getFieldMask",value:function(){return this.fieldMask}}])}(Df);function Uf(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Vf(e,t,n){var r=new Map;Zc(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,yf(o,s,n[i]))}return r}function jf(e,t,n){var r,i=new Map,a=u(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,c=n.data.field(o.field);i.set(o.field,gf(s,c,t))}}catch(l){a.e(l)}finally{a.f()}return i}var Bf,zf,qf=function(e){function t(e,n){var r;return w(this,t),(r=f(this,t)).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return d(t,e),b(t,[{key:"getFieldMask",value:function(){return null}}])}(Df),Kf=function(e){function t(e,n){var r;return w(this,t),(r=f(this,t)).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return d(t,e),b(t,[{key:"getFieldMask",value:function(){return null}}])}(Df),Hf=function(){return b((function e(t,n,r,i){w(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}),[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Of(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=u(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Pf(i,e,t,this.localWriteTime))}}catch(c){r.e(c)}finally{r.f()}var a,o=u(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Pf(s,e,t,this.localWriteTime))}}catch(c){o.e(c)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=of();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Nf(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(yl.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),lf())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,(function(e,t){return Lf(e,t)}))&&vl(this.baseMutations,e.baseMutations,(function(e,t){return Lf(e,t)}))}}])}(),Gf=function(){function e(t,n,r,i){w(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return b(e,null,[{key:"from",value:function(t,n,r){Zc(t.mutations.length===r.length);for(var i=function(){return uf}(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}])}(),$f=function(){return b((function e(t,n){w(this,e),this.largestBatchId=t,this.mutation=n}),[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}])}();function Wf(e){switch(e){default:return Jc();case tl.CANCELLED:case tl.UNKNOWN:case tl.DEADLINE_EXCEEDED:case tl.RESOURCE_EXHAUSTED:case tl.INTERNAL:case tl.UNAVAILABLE:case tl.UNAUTHENTICATED:return!1;case tl.INVALID_ARGUMENT:case tl.NOT_FOUND:case tl.ALREADY_EXISTS:case tl.PERMISSION_DENIED:case tl.FAILED_PRECONDITION:case tl.ABORTED:case tl.OUT_OF_RANGE:case tl.UNIMPLEMENTED:case tl.DATA_LOSS:return!0}}(zf=Bf||(Bf={}))[zf.OK=0]="OK",zf[zf.CANCELLED=1]="CANCELLED",zf[zf.UNKNOWN=2]="UNKNOWN",zf[zf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zf[zf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zf[zf.NOT_FOUND=5]="NOT_FOUND",zf[zf.ALREADY_EXISTS=6]="ALREADY_EXISTS",zf[zf.PERMISSION_DENIED=7]="PERMISSION_DENIED",zf[zf.UNAUTHENTICATED=16]="UNAUTHENTICATED",zf[zf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zf[zf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zf[zf.ABORTED=10]="ABORTED",zf[zf.OUT_OF_RANGE=11]="OUT_OF_RANGE",zf[zf.UNIMPLEMENTED=12]="UNIMPLEMENTED",zf[zf.INTERNAL=13]="INTERNAL",zf[zf.UNAVAILABLE=14]="UNAVAILABLE",zf[zf.DATA_LOSS=15]="DATA_LOSS",
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
new zc([4294967295,4294967295],0);var Qf=b((function e(t,n){w(this,e),this.databaseId=t,this.useProto3Json=n}));function Yf(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Xf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Jf(e,t){return Yf(e,t.toTimestamp())}function Zf(e){return Zc(!!e),yl.fromTimestamp((t=$l(e),new gl(t.seconds,t.nanos)));var t}function ed(e,t){return(n=e,new wl(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function td(e,t){return ed(e.databaseId,t.path)}function nd(e){var t=function(e){var t=wl.fromString(e);return Zc(function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(t)),t}(e);return 4===t.length?wl.emptyPath():function(e){return Zc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}(t)}function rd(e,t,n){return{name:td(e,t),fields:n.value.mapValue.fields}}function id(e){var t=nd(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Zc(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=ad(e);return t instanceof Eh&&Ih(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=function(e){return e.map((function(e){return new wh(od((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}))}(n.orderBy));var u=null;n.limit&&(u=function(e){var t;return Pl(t="object"==h(e)?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new gh(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new gh(n,t)}(n.endAt)),function(e,t,n,r,i,a,o,s){return new Bh(e,t,n,r,i,a,o,s)}(t,i,s,o,u,"F",c,l)}function ad(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=od(e.unaryFilter.field);return _h.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=od(e.unaryFilter.field);return _h.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=od(e.unaryFilter.field);return _h.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=od(e.unaryFilter.field);return _h.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Jc()}}(e):void 0!==e.fieldFilter?(t=e,_h.create(od(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jc()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return Eh.create(e.compositeFilter.filters.map((function(e){return ad(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Jc()}}(e.compositeFilter.op))}(e):Jc();var t}function od(e){return bl.fromServerFormat(e.fieldPath)}function sd(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}var ud=b((function e(t){w(this,e),this.ht=t}));function cd(e){var t=id({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Gh(t,t.limit,"L"):t}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var ld=function(){return b((function e(){w(this,e),this.an=new hd}),[{key:"addToCollectionParentIndex",value:function(e,t){return this.an.add(t),Dl.resolve()}},{key:"getCollectionParents",value:function(e,t){return Dl.resolve(this.an.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Dl.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Dl.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return Dl.resolve()}},{key:"createTargetIndexes",value:function(e,t){return Dl.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Dl.resolve(null)}},{key:"getIndexType",value:function(e,t){return Dl.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Dl.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Dl.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Dl.resolve(Tl.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Dl.resolve(Tl.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Dl.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Dl.resolve()}}])}(),hd=function(){return b((function e(){w(this,e),this.index={}}),[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Bl(wl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Bl(wl.comparator)).toArray()}}])}(),fd=function(){function e(t){w(this,e),this.Nn=t}return b(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"Bn",value:function(){return new e(0)}},{key:"Ln",value:function(){return new e(-1)}}])}(),dd=function(){return b((function e(){w(this,e),this.changes=new Jh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}),[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,vh.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Dl.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}])}(),pd=b((function e(t,n){w(this,e),this.overlayedDocument=t,this.mutatedFields=n})),vd=function(){return b((function e(t,n,r,i){w(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}),[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Pf(r.mutation,e,ql.empty(),gl.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,lf()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lf(),i=af();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=nf();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=af();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,lf())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=ef(),a=sf(),o=sf();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ff)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Pf(o.mutation,t,o.mutation.getFieldMask(),gl.now())):a.set(t.key,ql.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new pd(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=sf(),i=new Ul((function(e,t){return e-t})),a=lf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=u(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ql.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||lf()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=of();c.forEach((function(e){if(!a.has(e)){var n=Nf(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return Dl.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return i=t,_l.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var i}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Dl.resolve(af()),s=-1,u=a;return o.next((function(t){return Dl.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?Dl.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,lf())})).next((function(e){return{batchId:s,changes:rf(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new _l(t)).next((function(e){var t=nf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=nf();return this.indexManager.getCollectionParents(e,a).next((function(s){return Dl.forEach(s,(function(s){var u,c,l=(u=t,c=s.child(a),new Bh(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));return i.getDocumentsMatchingCollectionQuery(e,l,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,vh.newInvalidDocument(r)))}));var n=nf();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&Pf(a.mutation,r,ql.empty(),gl.now()),Yh(t,r)&&(n=n.insert(e,r))})),n}))}}])}(),gd=function(){return b((function e(t){w(this,e),this.serializer=t,this.lr=new Map,this.hr=new Map}),[{key:"getBundleMetadata",value:function(e,t){return Dl.resolve(this.lr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.lr.set(t.id,{id:(n=t).id,version:n.version,createTime:Zf(n.createTime)}),Dl.resolve();var n}},{key:"getNamedQuery",value:function(e,t){return Dl.resolve(this.hr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hr.set(t.name,{name:(n=t).name,query:cd(n.bundledQuery),readTime:Zf(n.readTime)}),Dl.resolve();var n}}])}(),yd=function(){return b((function e(){w(this,e),this.overlays=new Ul(_l.comparator),this.Pr=new Map}),[{key:"getOverlay",value:function(e,t){return Dl.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=af();return Dl.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.It(e,t,i)})),Dl.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Pr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Pr.delete(n)),Dl.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=af(),i=t.length+1,a=new _l(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Dl.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Ul((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=af(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=af(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Dl.resolve(u)}},{key:"It",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Pr.get(r.largestBatchId).delete(n.key);this.Pr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new $f(t,n));var a=this.Pr.get(t);void 0===a&&(a=lf(),this.Pr.set(t,a)),this.Pr.set(t,a.add(n.key))}}])}(),md=function(){return b((function e(){w(this,e),this.Ir=new Bl(wd.dr),this.Tr=new Bl(wd.Er)}),[{key:"isEmpty",value:function(){return this.Ir.isEmpty()}},{key:"addReference",value:function(e,t){var n=new wd(e,t);this.Ir=this.Ir.add(n),this.Tr=this.Tr.add(n)}},{key:"Ar",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Rr(new wd(e,t))}},{key:"Vr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"mr",value:function(e){var t=this,n=new _l(new wl([])),r=new wd(n,e),i=new wd(n,e+1),a=[];return this.Tr.forEachInRange([r,i],(function(e){t.Rr(e),a.push(e.key)})),a}},{key:"gr",value:function(){var e=this;this.Ir.forEach((function(t){return e.Rr(t)}))}},{key:"Rr",value:function(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}},{key:"pr",value:function(e){var t=new _l(new wl([])),n=new wd(t,e),r=new wd(t,e+1),i=lf();return this.Tr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new wd(e,0),n=this.Ir.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}])}(),wd=function(){return b((function e(t,n){w(this,e),this.key=t,this.yr=n}),null,[{key:"dr",value:function(e,t){return _l.comparator(e.key,t.key)||pl(e.yr,t.yr)}},{key:"Er",value:function(e,t){return pl(e.yr,t.yr)||_l.comparator(e.key,t.key)}}])}(),kd=function(){return b((function e(t,n){w(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Bl(wd.dr)}),[{key:"checkEmpty",value:function(e){return Dl.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Hf(i,t,n,r);this.mutationQueue.push(a);var o,s=u(r);try{for(s.s();!(o=s.n()).done;){var c=o.value;this.Sr=this.Sr.add(new wd(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast())}}catch(l){s.e(l)}finally{s.f()}return Dl.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Dl.resolve(this.br(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Dr(n),i=r<0?0:r;return Dl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Dl.resolve(0===this.mutationQueue.length?-1:this.wr-1)}},{key:"getAllMutationBatches",value:function(e){return Dl.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new wd(t,0),i=new wd(t,Number.POSITIVE_INFINITY),a=[];return this.Sr.forEachInRange([r,i],(function(e){var t=n.br(e.yr);a.push(t)})),Dl.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Bl(pl);return t.forEach((function(e){var t=new wd(e,0),i=new wd(e,Number.POSITIVE_INFINITY);n.Sr.forEachInRange([t,i],(function(e){r=r.add(e.yr)}))})),Dl.resolve(this.Cr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;_l.isDocumentKey(i)||(i=i.child(""));var a=new wd(new _l(i),0),o=new Bl(pl);return this.Sr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.yr)),!0)}),a),Dl.resolve(this.Cr(o))}},{key:"Cr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.br(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Zc(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Sr;return Dl.forEach(t.mutations,(function(i){var a=new wd(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Sr=r}))}},{key:"xn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new wd(t,0),r=this.Sr.firstAfterOrEqual(n);return Dl.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Dl.resolve()}},{key:"vr",value:function(e,t){return this.Dr(e)}},{key:"Dr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"br",value:function(e){var t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}])}(),bd=function(){return b((function e(t){w(this,e),this.Fr=t,this.docs=new Ul(_l.comparator),this.size=0}),[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Fr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Dl.resolve(n?n.document.mutableCopy():vh.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ef();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():vh.newInvalidDocument(e))})),Dl.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=ef(),a=t.path,o=new _l(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Il(El(l),n)<=0||(r.has(l.key)||Yh(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Dl.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Jc()}},{key:"Mr",value:function(e,t){return Dl.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new _d(this)}},{key:"getSize",value:function(e){return Dl.resolve(this.size)}}])}(),_d=function(e){function t(e){var n;return w(this,t),(n=f(this,t)).ur=e,n}return d(t,e),b(t,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.ur.addEntry(e,i)):t.ur.removeEntry(r)})),Dl.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ur.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ur.getEntries(e,t)}}])}(dd),Ed=function(){return b((function e(t){w(this,e),this.persistence=t,this.Or=new Jh((function(e){return Vh(e)}),jh),this.lastRemoteSnapshotVersion=yl.min(),this.highestTargetId=0,this.Nr=0,this.Br=new md,this.targetCount=0,this.Lr=fd.Bn()}),[{key:"forEachTarget",value:function(e,t){return this.Or.forEach((function(e,n){return t(n)})),Dl.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Dl.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Dl.resolve(this.Nr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Lr.next(),Dl.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Nr&&(this.Nr=t),Dl.resolve()}},{key:"Qn",value:function(e){this.Or.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Lr=new fd(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Qn(t),this.targetCount+=1,Dl.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Qn(t),Dl.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Or.delete(t.target),this.Br.mr(t.targetId),this.targetCount-=1,Dl.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Or.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Or.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Dl.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Dl.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Or.get(t)||null;return Dl.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Br.Ar(t,n),Dl.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Br.Vr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Dl.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Br.mr(t),Dl.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Br.pr(t);return Dl.resolve(n)}},{key:"containsKey",value:function(e,t){return Dl.resolve(this.Br.containsKey(t))}}])}(),Td=function(){return b((function e(t,n){var r=this;w(this,e),this.kr={},this.overlays={},this.qr=new Ol(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=t(this),this.Kr=new Ed(this),this.indexManager=new ld,this.remoteDocumentCache=new bd((function(e){return r.referenceDelegate.$r(e)})),this.serializer=new ud(n),this.Ur=new gd(this.serializer)}),[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new yd,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.kr[e.toKey()];return n||(n=new kd(t,this.referenceDelegate),this.kr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;Wc("MemoryPersistence","Starting transaction:",e);var i=new Id(this.qr.next());return this.referenceDelegate.Wr(),n(i).next((function(e){return r.referenceDelegate.Gr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zr",value:function(e,t){return Dl.or(Object.values(this.kr).map((function(n){return function(){return n.containsKey(e,t)}})))}}])}(),Id=function(e){function t(e){var n;return w(this,t),(n=f(this,t)).currentSequenceNumber=e,n}return d(t,e),b(t)}(Sl),xd=function(){function e(t){w(this,e),this.persistence=t,this.jr=new md,this.Hr=null}return b(e,[{key:"Yr",get:function(){if(this.Hr)return this.Hr;throw Jc()}},{key:"addReference",value:function(e,t,n){return this.jr.addReference(n,t),this.Yr.delete(n.toString()),Dl.resolve()}},{key:"removeReference",value:function(e,t,n){return this.jr.removeReference(n,t),this.Yr.add(n.toString()),Dl.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Yr.add(t.toString()),Dl.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.jr.mr(t.targetId).forEach((function(e){return n.Yr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Yr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Wr",value:function(){this.Hr=new Set}},{key:"Gr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dl.forEach(this.Yr,(function(r){var i=_l.fromPath(r);return t.Zr(e,i).next((function(e){e||n.removeEntry(i,yl.min())}))})).next((function(){return t.Hr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zr(e,t).next((function(e){e?n.Yr.delete(t.toString()):n.Yr.add(t.toString())}))}},{key:"$r",value:function(e){return 0}},{key:"Zr",value:function(e,t){var n=this;return Dl.or([function(){return Dl.resolve(n.jr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zr(e,t)}])}}],[{key:"Jr",value:function(t){return new e(t)}}])}(),Sd=function(){function e(t,n,r,i){w(this,e),this.targetId=t,this.fromCache=n,this.Qi=r,this.Ki=i}return b(e,null,[{key:"$i",value:function(t,n){var r,i=lf(),a=lf(),o=u(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(c){o.e(c)}finally{o.f()}return new e(t,n.fromCache,i,a)}}])}(),Ad=function(){return b((function e(){w(this,e),this._documentReadCount=0}),[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}])}(),Cd=function(){return b((function e(){w(this,e),this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}),[{key:"initialize",value:function(e,t){this.ji=e,this.indexManager=t,this.Ui=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.Hi(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.Ji(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new Ad;return i.Yi(e,t,n).next((function(r){if(a.result=r,i.Wi)return i.Zi(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Zi",value:function(e,t,n,r){return n.documentReadCount<this.Gi?($c()<=de.DEBUG&&Wc("QueryEngine","SDK will not create cache indexes for query:",Qh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),Dl.resolve()):($c()<=de.DEBUG&&Wc("QueryEngine","Query:",Qh(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.zi*r?($c()<=de.DEBUG&&Wc("QueryEngine","The SDK decides to create cache indexes for query:",Qh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hh(t))):Dl.resolve())}},{key:"Hi",value:function(e,t){var n=this;if(qh(t))return Dl.resolve(null);var r=Hh(t);return this.indexManager.getIndexType(e,r).next((function(a){return 0===a?null:(null!==t.limit&&1===a&&(t=Gh(t,null,"F"),r=Hh(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(a){var o=lf.apply(void 0,i(a));return n.ji.getDocuments(e,o).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var a=n.Xi(t,i);return n.es(t,a,o,r.readTime)?n.Hi(e,Gh(t,null,"F")):n.ts(e,a,t,r)}))}))})))}))}},{key:"Ji",value:function(e,t,n,r){var i=this;return qh(t)||r.isEqual(yl.min())?Dl.resolve(null):this.ji.getDocuments(e,n).next((function(a){var o=i.Xi(t,a);return i.es(t,o,n,r)?Dl.resolve(null):($c()<=de.DEBUG&&Wc("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qh(t)),i.ts(e,o,t,function(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=yl.fromTimestamp(1e9===r?new gl(n+1,0):new gl(n,r));return new Tl(i,_l.empty(),t)}(r,-1)).next((function(e){return e})))}))}},{key:"Xi",value:function(e,t){var n=new Bl(function(e){return function(t,n){var r,i=!1,a=u(Kh(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Xh(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(c){a.e(c)}finally{a.f()}return 0}}(e));return t.forEach((function(t,r){Yh(e,r)&&(n=n.add(r))})),n}},{key:"es",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Yi",value:function(e,t,n){return $c()<=de.DEBUG&&Wc("QueryEngine","Using full collection scan to execute query:",Qh(t)),this.ji.getDocumentsMatchingQuery(e,t,Tl.min(),n)}},{key:"ts",value:function(e,t,n,r){return this.ji.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}])}(),Dd=function(){return b((function e(t,n,r,i){w(this,e),this.persistence=t,this.ns=n,this.serializer=i,this.rs=new Ul(pl),this.ss=new Jh((function(e){return Vh(e)}),jh),this.os=new Map,this._s=t.getRemoteDocumentCache(),this.Kr=t.getTargetCache(),this.Ur=t.getBundleCache(),this.us(r)}),[{key:"us",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vd(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.rs)}))}}])}();function Nd(e,t){return Od.apply(this,arguments)}function Od(){return Od=o(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=el(t),e.next=3,i.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return i.mutationQueue.getAllMutationBatches(e).next((function(r){return t=r,i.us(n),i.mutationQueue.getAllMutationBatches(e)})).next((function(n){var r,a=[],o=[],s=lf(),c=u(t);try{for(c.s();!(r=c.n()).done;){var l=r.value;a.push(l.batchId);var h,f=u(l.mutations);try{for(f.s();!(h=f.n()).done;){var d=h.value;s=s.add(d.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){c.e(k)}finally{c.f()}var p,v=u(n);try{for(v.s();!(p=v.n()).done;){var g=p.value;o.push(g.batchId);var y,m=u(g.mutations);try{for(m.s();!(y=m.n()).done;){var w=y.value;s=s.add(w.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){v.e(k)}finally{v.f()}return i.localDocuments.getDocuments(e,s).next((function(e){return{cs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Od.apply(this,arguments)}function Pd(e,t){var n=el(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r,i,a,o,s,u,c,l=t.batch.keys(),h=n._s.newChangeBuffer({trackRemovals:!0});return(r=n,i=e,a=t,o=h,s=a.batch,u=s.keys(),c=Dl.resolve(),u.forEach((function(e){c=c.next((function(){return o.getEntry(i,e)})).next((function(t){var n=a.docVersions.get(e);Zc(null!==n),t.version.compareTo(n)<0&&(s.applyToRemoteDocument(t,a),t.isValidDocument()&&(t.setReadTime(a.commitVersion),o.addEntry(t)))}))})),c.next((function(){return r.mutationQueue.removeMutationBatch(i,s)}))).next((function(){return h.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,l,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=lf(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,l)}))}))}function Md(e){var t=el(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Kr.getLastRemoteSnapshotVersion(e)}))}function Ld(e,t){var n=el(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}var Rd=function(){return b((function e(){w(this,e),this.activeTargetIds=hf}),[{key:"Rs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Vs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"As",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}])}(),Fd=function(){return b((function e(){w(this,e),this.ro=new Rd,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}),[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.ro.Rs(e),this.io[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.io[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.ro.Vs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.io[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.ro.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"start",value:function(){return this.ro=new Rd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}])}(),Ud=function(){return b((function e(){w(this,e)}),[{key:"so",value:function(e){}},{key:"shutdown",value:function(){}}])}(),Vd=function(){return b((function e(){var t=this;w(this,e),this.oo=function(){return t._o()},this.ao=function(){return t.uo()},this.co=[],this.lo()}),[{key:"so",value:function(e){this.co.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}},{key:"lo",value:function(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}},{key:"_o",value:function(){Wc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=u(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"uo",value:function(){Wc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=u(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}])}(),jd=null;function Bd(){return null===jd?jd=268435456+Math.round(2147483648*Math.random()):jd++,"0x"+jd.toString(16)
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}var zd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},qd=function(){return b((function e(t){w(this,e),this.ho=t.ho,this.Po=t.Po}),[{key:"Io",value:function(e){this.To=e}},{key:"Eo",value:function(e){this.Ao=e}},{key:"onMessage",value:function(e){this.Ro=e}},{key:"close",value:function(){this.Po()}},{key:"send",value:function(e){this.ho(e)}},{key:"Vo",value:function(){this.To()}},{key:"mo",value:function(e){this.Ao(e)}},{key:"fo",value:function(e){this.Ro(e)}}])}(),Kd="WebChannelConnection",Hd=function(e){function t(e){var n;return w(this,t),(n=f(this,t,[e])).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n.longPollingOptions=e.longPollingOptions,n}return d(t,e),b(t,[{key:"vo",value:function(e,t,n,r){var i=Bd();return new Promise((function(a,o){var s=new Bc;s.setWithCredentials(!0),s.listenOnce(Rc.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Lc.NO_ERROR:var t=s.getResponseJson();Wc(Kd,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Lc.TIMEOUT:Wc(Kd,"RPC '".concat(e,"' ").concat(i," timed out")),o(new nl(tl.DEADLINE_EXCEEDED,"Request time out"));break;case Lc.HTTP_ERROR:var n=s.getStatus();if(Wc(Kd,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=(l=u.status,h=l.toLowerCase().replace(/_/g,"-"),Object.values(tl).indexOf(h)>=0?h:tl.UNKNOWN);o(new nl(c,u.message))}else o(new nl(tl.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new nl(tl.UNAVAILABLE,"Connection failed."));break;default:Jc()}}finally{Wc(Kd,"RPC '".concat(e,"' ").concat(i," completed."))}var l,h}));var u=JSON.stringify(r);Wc(Kd,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"Mo",value:function(e,t,n){var r=Bd(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=new hc,o=cs(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Co(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");Wc(Kd,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),h=!1,f=!1,d=new qd({ho:function(t){f?Wc(Kd,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Wc(Kd,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),Wc(Kd,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},Po:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(t){setTimeout((function(){throw t}),0)}}))};return p(l,jc.EventType.OPEN,(function(){f||Wc(Kd,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,jc.EventType.CLOSE,(function(){f||(f=!0,Wc(Kd,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.mo())})),p(l,jc.EventType.ERROR,(function(t){f||(f=!0,Yc(Kd,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.mo(new nl(tl.UNAVAILABLE,"The operation could not be completed")))})),p(l,jc.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Zc(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Wc(Kd,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=Bf[e];if(void 0!==t)return function(e){if(void 0===e)return Qc("GRPC error has no .code"),tl.UNKNOWN;switch(e){case Bf.OK:return tl.OK;case Bf.CANCELLED:return tl.CANCELLED;case Bf.UNKNOWN:return tl.UNKNOWN;case Bf.DEADLINE_EXCEEDED:return tl.DEADLINE_EXCEEDED;case Bf.RESOURCE_EXHAUSTED:return tl.RESOURCE_EXHAUSTED;case Bf.INTERNAL:return tl.INTERNAL;case Bf.UNAVAILABLE:return tl.UNAVAILABLE;case Bf.UNAUTHENTICATED:return tl.UNAUTHENTICATED;case Bf.INVALID_ARGUMENT:return tl.INVALID_ARGUMENT;case Bf.NOT_FOUND:return tl.NOT_FOUND;case Bf.ALREADY_EXISTS:return tl.ALREADY_EXISTS;case Bf.PERMISSION_DENIED:return tl.PERMISSION_DENIED;case Bf.FAILED_PRECONDITION:return tl.FAILED_PRECONDITION;case Bf.ABORTED:return tl.ABORTED;case Bf.OUT_OF_RANGE:return tl.OUT_OF_RANGE;case Bf.UNIMPLEMENTED:return tl.UNIMPLEMENTED;case Bf.DATA_LOSS:return tl.DATA_LOSS;default:return Jc()}}(t)}(s),c=o.message;void 0===u&&(u=tl.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),f=!0,d.mo(new nl(u,c)),l.close()}else Wc(Kd,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.fo(i)}})),p(o,Fc.STAT_EVENT,(function(t){t.stat===Uc?Wc(Kd,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Vc&&Wc(Kd,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Vo()}),0),d}}])}(function(){return b((function e(t){w(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo="projects/".concat(r,"/databases/").concat(i),this.wo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}),[{key:"So",get:function(){return!1}},{key:"bo",value:function(e,t,n,r,i){var a=Bd(),o=this.Do(e,t);Wc("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(s,r,i),this.vo(e,o,s,n).then((function(t){return Wc("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Yc("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Fo",value:function(e,t,n,r,i,a){return this.bo(e,t,n,r,i)}},{key:"Co",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Do",value:function(e,t){var n=zd[e];return"".concat(this.po,"/v1/").concat(t,":").concat(n)}}])}());
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Gd(){return"undefined"!=typeof document?document:null}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function $d(e){return new Qf(e,!0)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Wd=function(){return b((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;w(this,e),this._i=t,this.timerId=n,this.xo=r,this.Oo=i,this.No=a,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}),[{key:"reset",value:function(){this.Bo=0}},{key:"qo",value:function(){this.Bo=this.No}},{key:"Qo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&Wc("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,(function(){return t.ko=Date.now(),e()})),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}},{key:"$o",value:function(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}},{key:"cancel",value:function(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"Ko",value:function(){return(Math.random()-.5)*this.Bo}}])}(),Qd=function(){return b((function e(t,n,r,i,a,o,s,u){w(this,e),this._i=t,this.Uo=r,this.Wo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new Wd(t,n)}),[{key:"Jo",value:function(){return 1===this.state||5===this.state||this.Yo()}},{key:"Yo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Zo()}},{key:"stop",value:(n=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Jo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"Xo",value:function(){this.state=0,this.Ho.reset()}},{key:"e_",value:function(){var e=this;this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,(function(){return e.t_()})))}},{key:"n_",value:function(e){this.r_(),this.stream.send(e)}},{key:"t_",value:(t=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Yo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"i_",value:function(){this.jo&&(this.jo.cancel(),this.jo=null)}},{key:"close",value:(e=o(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.r_(),this.i_(),this.Ho.cancel(),this.Go++,4!==t?this.Ho.reset():n&&n.code===tl.RESOURCE_EXHAUSTED?(Qc(n.toString()),Qc("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===tl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.s_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Eo(n);case 9:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"s_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Go===n&&e.__(i,a)}),(function(n){t((function(){var t=new nl(tl.UNKNOWN,"Fetching auth token failed: "+n.message);return e.a_(t)}))}))}},{key:"__",value:function(e,t){var n=this,r=this.o_(this.Go);this.stream=this.u_(e,t),this.stream.Io((function(){r((function(){return n.state=2,n.jo=n._i.enqueueAfterDelay(n.Wo,1e4,(function(){return n.Yo()&&(n.state=3),Promise.resolve()})),n.listener.Io()}))})),this.stream.Eo((function(e){r((function(){return n.a_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Zo",value:function(){var e=this;this.state=5,this.Ho.Qo(o(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"a_",value:function(e){return Wc("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"o_",value:function(e){var t=this;return function(n){t._i.enqueueAndForget((function(){return t.Go===e?n():(Wc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]);var e,t,n}(),Yd=function(t){function n(e,t,r,i,a,o){var s;return w(this,n),(s=f(this,n,[e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o])).serializer=a,s.P_=!1,s}return d(n,t),b(n,[{key:"I_",get:function(){return this.P_}},{key:"start",value:function(){this.P_=!1,this.lastStreamToken=void 0,e(m(n.prototype),"start",this).call(this)}},{key:"s_",value:function(){this.P_&&this.d_([])}},{key:"u_",value:function(e,t){return this.connection.Mo("Write",e,t)}},{key:"onMessage",value:function(e){if(Zc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();var t=function(e,t){return e&&e.length>0?(Zc(void 0!==t),e.map((function(e){return r=t,(i=(n=e).updateTime?Zf(n.updateTime):Zf(r)).isEqual(yl.min())&&(i=Zf(r)),new Sf(i,n.transformResults||[]);var n,r,i}))):[]}(e.writeResults,e.commitTime),n=Zf(e.commitTime);return this.listener.T_(n,t)}return Zc(!e.writeResults||0===e.writeResults.length),this.P_=!0,this.listener.E_()}},{key:"A_",value:function(){var e={};e.database=function(e){return new wl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}(this.serializer),this.n_(e)}},{key:"d_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return function(e,t){var n,r,i;if(t instanceof Rf)n={update:rd(e,t.key,t.value)};else if(t instanceof qf)n={delete:td(e,t.key)};else if(t instanceof Ff)n={update:rd(e,t.key,t.data),updateMask:sd(t.fieldMask)};else{if(!(t instanceof Kf))return Jc();n={verify:td(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof wf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof kf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _f)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Tf)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw Jc()}(0,e)}))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:Jf(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Jc())),n}(t.serializer,e)}))};this.n_(n)}}])}(Qd),Xd=function(e){function t(e,n,r,i){var a;return w(this,t),(a=f(this,t)).authCredentials=e,a.appCheckCredentials=n,a.connection=r,a.serializer=i,a.R_=!1,a}return d(t,e),b(t,[{key:"V_",value:function(){if(this.R_)throw new nl(tl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"bo",value:function(e,t,n){var r=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.connection.bo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===tl.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new nl(tl.UNKNOWN,e.toString())}))}},{key:"Fo",value:function(e,t,n,r){var i=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.connection.Fo(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===tl.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new nl(tl.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.R_=!0}}])}(b((function e(){w(this,e)}))),Jd=function(){return b((function e(t,n){w(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}),[{key:"y_",value:function(){var e=this;0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.g_=null,e.S_("Backend didn't respond within 10 seconds."),e.w_("Offline"),Promise.resolve()})))}},{key:"b_",value:function(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.w_("Offline")))}},{key:"set",value:function(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}},{key:"w_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"S_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.p_?(Qc(t),this.p_=!1):Wc("OnlineStateTracker",t)}},{key:"D_",value:function(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}])}(),Zd=b((function e(t,n,i,a,s){var u=this;w(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=s,this.x_.so((function(e){i.enqueueAndForget(o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ip(u),!e.t0){e.next=5;break}return Wc("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=o(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=el(t)).F_.add(4),e.next=4,np(n);case 4:return n.O_.set("Unknown"),n.F_.delete(4),e.next=8,ep(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.O_=new Jd(i,a)}));
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function ep(e){return tp.apply(this,arguments)}function tp(){return(tp=o(r().mark((function e(t){var n,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ip(t)){e.next=18;break}n=u(t.M_),e.prev=2,n.s();case 4:if((i=n.n()).done){e.next=10;break}return a=i.value,e.next=8,a(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function np(e){return rp.apply(this,arguments)}function rp(){return(rp=o(r().mark((function e(t){var n,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=u(t.M_),e.prev=1,n.s();case 3:if((i=n.n()).done){e.next=9;break}return a=i.value,e.next=7,a(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function ip(e){return 0===el(e).F_.size}function ap(e,t,n){return op.apply(this,arguments)}function op(){return(op=o(r().mark((function e(t,n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nl(n)){e.next=2;break}throw n;case 2:return t.F_.add(1),e.next=5,np(t);case 5:t.O_.set("Offline"),i||(i=function(){return Md(t.localStore)}),t.asyncQueue.enqueueRetryable(o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wc("RemoteStore","Retrying IndexedDB access"),e.next=3,i();case 3:return t.F_.delete(1),e.next=6,ep(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sp(e,t){return t().catch((function(n){return ap(e,n,t)}))}function up(e){return cp.apply(this,arguments)}function cp(){return cp=o(r().mark((function e(t){var n,i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=el(t),i=xp(n),a=n.C_.length>0?n.C_[n.C_.length-1].batchId:-1;case 2:if(!lp(n)){e.next=19;break}return e.prev=3,e.next=6,Ld(n.localStore,a);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.C_.length&&i.e_(),e.abrupt("break",19);case 10:a=o.batchId,hp(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,ap(n,e.t0);case 17:e.next=2;break;case 19:fp(n)&&dp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),cp.apply(this,arguments)}function lp(e){return ip(e)&&e.C_.length<10}function hp(e,t){e.C_.push(t);var n=xp(e);n.Yo()&&n.I_&&n.d_(t.mutations)}function fp(e){return ip(e)&&!xp(e).Jo()&&e.C_.length>0}function dp(e){xp(e).start()}function pp(e){return vp.apply(this,arguments)}function vp(){return(vp=o(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xp(t).A_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gp(e){return yp.apply(this,arguments)}function yp(){return(yp=o(r().mark((function e(t){var n,i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=xp(t),i=u(t.C_);try{for(i.s();!(a=i.n()).done;)o=a.value,n.d_(o.mutations)}catch(r){i.e(r)}finally{i.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mp(e,t,n){return wp.apply(this,arguments)}function wp(){return wp=o(r().mark((function e(t,n,i){var a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.C_.shift(),o=Gf.from(a,n,i),e.next=3,sp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,up(t);case 5:case"end":return e.stop()}}),e)}))),wp.apply(this,arguments)}function kp(e,t){return bp.apply(this,arguments)}function bp(){return bp=o(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&xp(t).I_,!e.t0){e.next=4;break}return e.next=4,function(){var e=o(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Wf(r=n.code)||r===tl.ABORTED){e.next=7;break}return i=t.C_.shift(),xp(t).Xo(),e.next=5,sp(t,(function(){return t.remoteSyncer.rejectFailedWrite(i.batchId,n)}));case 5:return e.next=7,up(t);case 7:case"end":return e.stop()}var r}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:fp(t)&&dp(t);case 5:case"end":return e.stop()}}),e)}))),bp.apply(this,arguments)}function _p(e,t){return Ep.apply(this,arguments)}function Ep(){return Ep=o(r().mark((function e(t,n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=el(t)).asyncQueue.verifyOperationInProgress(),Wc("RemoteStore","RemoteStore received new credentials"),a=ip(i),i.F_.add(3),e.next=6,np(i);case 6:return a&&i.O_.set("Unknown"),e.next=9,i.remoteSyncer.handleCredentialChange(n);case 9:return i.F_.delete(3),e.next=12,ep(i);case 12:case"end":return e.stop()}}),e)}))),Ep.apply(this,arguments)}function Tp(e,t){return Ip.apply(this,arguments)}function Ip(){return(Ip=o(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=el(t),!n){e.next=7;break}return i.F_.delete(2),e.next=5,ep(i);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return i.F_.add(2),e.next=12,np(i);case 12:i.O_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xp(e){return e.L_||(e.L_=function(e,t,n){var r=el(e);return r.V_(),new Yd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:pp.bind(null,e),Eo:kp.bind(null,e),E_:gp.bind(null,e),T_:mp.bind(null,e)}),e.M_.push(function(){var t=o(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.L_.Xo(),t.next=4,up(e);case 4:t.next=9;break;case 6:return t.next=8,e.L_.stop();case 8:e.C_.length>0&&(Wc("RemoteStore","Stopping write stream with ".concat(e.C_.length," pending writes")),e.C_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.L_
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}var Sp=function(){function e(t,n,r,i,a){w(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new rl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return b(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nl(tl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}])}();function Ap(e,t){if(Qc("AsyncQueue","".concat(t,": ").concat(e)),Nl(e))return new nl(tl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Cp=b((function e(){w(this,e),this.queries=new Jh((function(e){return Wh(e)}),$h),this.onlineState="Unknown",this.K_=new Set}));var Dp=function(){return b((function e(t,n,r,i,a,o){w(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Jh((function(e){return Wh(e)}),$h),this.pa=new Map,this.ya=new Set,this.wa=new Ul(_l.comparator),this.Sa=new Map,this.ba=new md,this.Da={},this.Ca=new Map,this.va=fd.Ln(),this.onlineState="Unknown",this.Fa=void 0}),[{key:"isPrimaryClient",get:function(){return!0===this.Fa}}])}();function Np(e,t,n){return Op.apply(this,arguments)}function Op(){return Op=o(r().mark((function e(t,n,i){var a,o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Kp(t),e.prev=1,e.next=4,function(e,t){var n,r,i=el(e),a=gl.now(),o=t.reduce((function(e,t){return e.add(t.key)}),lf());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=ef(),c=lf();return i._s.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(c=c.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],c=u(t);try{for(c.s();!(o=c.n()).done;){var l=o.value,h=Mf(l,n.get(l.key).overlayedDocument);null!=h&&s.push(new Ff(l.key,h,ph(h.value.mapValue),Af.exists(!0)))}}catch(f){c.e(f)}finally{c.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,c);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:rf(n)}}))}(a.localStore,n);case 4:return o=e.sent,a.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.Da[e.currentUser.toKey()];r||(r=new Ul(pl)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(a,o.batchId,i),e.next=9,jp(a,o.changes);case 9:return e.next=11,up(a.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s=Ap(e.t0,"Failed to persist write"),i.reject(s);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Op.apply(this,arguments)}function Pp(e,t,n){var r=el(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ga.forEach((function(e,n){var r=n.view.U_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=el(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=u(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.U_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&function(e){e.K_.forEach((function(e){e.next()}))}(n)}(r.eventManager,t),i.length&&r.fa.c_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Mp(e,t){return Lp.apply(this,arguments)}function Lp(){return Lp=o(r().mark((function e(t,n){var i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=el(t),a=n.batch.batchId,e.prev=1,e.next=4,Pd(i.localStore,n);case 4:return o=e.sent,Vp(i,a,null),Up(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),e.next=10,jp(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Al(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Lp.apply(this,arguments)}function Rp(e,t,n){return Fp.apply(this,arguments)}function Fp(){return Fp=o(r().mark((function e(t,n,i){var a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=el(t),e.prev=1,e.next=4,function(e,t){var n=el(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Zc(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(a.localStore,n);case 4:return o=e.sent,Vp(a,n,i),Up(a,n),a.sharedClientState.updateMutationState(n,"rejected",i),e.next=10,jp(a,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Al(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Fp.apply(this,arguments)}function Up(e,t){(e.Ca.get(t)||[]).forEach((function(e){e.resolve()})),e.Ca.delete(t)}function Vp(e,t,n){var r=el(e),i=r.Da[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function jp(e,t,n){return Bp.apply(this,arguments)}function Bp(){return Bp=o(r().mark((function e(t,n,i){var a,s,c,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=el(t),s=[],c=[],l=[],e.t0=a.ga.isEmpty(),e.t0){e.next=9;break}return a.ga.forEach((function(e,t){l.push(a.Ma(t,n,i).then((function(e){if((e||i)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){s.push(e);var n=Sd.$i(t.targetId,e);c.push(n)}})))})),e.next=6,Promise.all(l);case 6:return a.fa.c_(s),e.next=9,function(){var e=o(r().mark((function e(t,n){var i,a,o,s,c,l,h,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=el(t),e.prev=1,e.next=4,i.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Dl.forEach(n,(function(t){return Dl.forEach(t.Qi,(function(n){return i.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Dl.forEach(t.Ki,(function(n){return i.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Nl(e.t0)){e.next=10;break}throw e.t0;case 10:Wc("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:a=u(n);try{for(a.s();!(o=a.n()).done;)s=o.value,c=s.targetId,s.fromCache||(l=i.rs.get(c),h=l.snapshotVersion,f=l.withLastLimboFreeSnapshotVersion(h),i.rs=i.rs.insert(c,f))}catch(r){a.e(r)}finally{a.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(a.localStore,c);case 9:case"end":return e.stop()}}),e)}))),Bp.apply(this,arguments)}function zp(e,t){return qp.apply(this,arguments)}function qp(){return(qp=o(r().mark((function e(t,n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=el(t)).currentUser.isEqual(n)){e.next=11;break}return Wc("SyncEngine","User change. New user:",n.toKey()),e.next=5,Nd(i.localStore,n);case 5:return a=e.sent,i.currentUser=n,function(e,t){e.Ca.forEach((function(e){e.forEach((function(e){e.reject(new nl(tl.CANCELLED,t))}))})),e.Ca.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),e.next=11,jp(i,a.cs);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kp(e){var t=el(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Rp.bind(null,t),t}var Hp=function(){return b((function e(){w(this,e),this.synchronizeTabs=!1}),[{key:"initialize",value:(t=o(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=$d(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return function(e,t,n,r){return new Dd(e,t,n,r)}(this.persistence,new Cd,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Td(xd.Jr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Fd}},{key:"terminate",value:(e=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t}(),Gp=function(){return b((function e(){w(this,e)}),[{key:"initialize",value:(e=o(r().mark((function e(t,n){var i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Pp(i.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=zp.bind(null,this.syncEngine),e.next=12,Tp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"createEventManager",value:function(e){return new Cp}},{key:"createDatastore",value:function(e){var t,n=$d(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Hd(t));return function(e,t,n,r){return new Xd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new Zd(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return Pp(t.syncEngine,e,0)}),Vd.C()?new Vd:new Ud)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Dp(e,t,n,r,i,a);return o&&(s.Fa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return(e=o(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=el(t),Wc("RemoteStore","RemoteStore shutting down."),n.F_.add(5),e.next=5,np(n);case 5:n.x_.shutdown(),n.O_.set("Unknown");case 7:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}]);var e}(),$p=function(){return b((function e(t,n,i,a){var s=this;w(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=Kc.UNAUTHENTICATED,this.clientId=dl.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(i,function(){var e=o(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wc("FirestoreClient","Received user=",t.uid),e.next=3,s.authCredentialListener(t);case 3:s.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(i,(function(e){return Wc("FirestoreClient","Received new app check token=",e),s.appCheckCredentialListener(e,s.user)}))}),[{key:"getConfiguration",value:(e=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new nl(tl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new rl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(o(r().mark((function n(){var i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),i=Ap(n.t2,"Failed to shutdown persistence"),t.reject(i);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]);var e}();function Wp(e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=o(r().mark((function e(t,n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Wc("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return i=e.sent,e.next=6,n.initialize(i);case 6:a=i.initialUser,t.setCredentialChangeListener(function(){var e=o(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(t),e.t0){e.next=5;break}return e.next=4,Nd(n.localStore,t);case 4:a=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Qp.apply(this,arguments)}function Yp(e,t){return Xp.apply(this,arguments)}function Xp(){return Xp=o(r().mark((function e(t,n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Zp(t);case 3:return i=e.sent,Wc("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return a=e.sent,e.next=10,n.initialize(i,a);case 10:t.setCredentialChangeListener((function(e){return _p(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return _p(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Xp.apply(this,arguments)}function Jp(e){return"FirebaseError"===e.name?e.code===tl.FAILED_PRECONDITION||e.code===tl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Zp(e){return ev.apply(this,arguments)}function ev(){return(ev=o(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Wc("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Wp(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Jp(n=e.t0)){e.next=13;break}throw n;case 13:return Yc("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Wp(t,new Hp);case 16:e.next=21;break;case 18:return Wc("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Wp(t,new Hp);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function tv(){return(tv=o(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Wc("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Yp(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Wc("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Yp(t,new Gp);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nv(e){return function(e){return tv.apply(this,arguments)}(e).then((function(e){return e.syncEngine}))}
/**
       * @license
       * Copyright 2023 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function rv(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}var iv=new Map;
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function av(e,t,n){if(!n)throw new nl(tl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ov(e){if(!_l.isDocumentKey(e))throw new nl(tl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function sv(e){if(_l.isDocumentKey(e))throw new nl(tl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function uv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==h(e)){if(e instanceof Array)return"an array";var t=(n=e).constructor?n.constructor.name:null;return t?"a custom ".concat(t," object"):"an object"}var n;return"function"==typeof e?"a function":Jc()}function cv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nl(tl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=uv(e);throw new nl(tl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var lv=function(){return b((function e(t){var n,r;if(w(this,e),void 0===t.host){if(void 0!==t.ssl)throw new nl(tl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new nl(tl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new nl(tl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rv(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new nl(tl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new nl(tl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new nl(tl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}),[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}])}(),hv=function(){return b((function e(t,n,r,i){w(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lv({}),this._settingsFrozen=!1}),[{key:"app",get:function(){if(!this._app)throw new nl(tl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new nl(tl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lv(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new al;switch(e.type){case"firstParty":return new cl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new nl(tl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return e=this,(t=iv.get(e))&&(Wc("ComponentProvider","Removing Datastore"),iv.delete(e),t.terminate()),Promise.resolve();var e,t}}])}();function fv(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=cv(e,hv))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Yc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=Kc.MOCK_USER;else{s=
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[q(JSON.stringify({alg:"none",type:"JWT"})),q(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new nl(tl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Kc(c)}e._authCredentials=new ol(new il(s,u))}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var dv=function(){function e(t,n,r){w(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return b(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}])}(),pv=function(){function e(t,n,r){w(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return b(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new vv(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}])}(),vv=function(e){function t(e,n,r){var i;return w(this,t),(i=f(this,t,[e,n,zh(r)]))._path=r,i.type="collection",i}return d(t,e),b(t,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new pv(this.firestore,null,new _l(e))}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._path)}}])}(dv);function gv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ce(e),av("collection","path",t),e instanceof hv){var a=wl.fromString.apply(wl,[t].concat(r));return sv(a),new vv(e,null,a)}if(!(e instanceof pv||e instanceof vv))throw new nl(tl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(wl.fromString.apply(wl,[t].concat(r)));return sv(o),new vv(e.firestore,null,o)}function yv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ce(e),1===arguments.length&&(t=dl.V()),av("doc","path",t),e instanceof hv){var a=wl.fromString.apply(wl,[t].concat(r));return ov(a),new pv(e,null,new _l(a))}if(!(e instanceof pv||e instanceof vv))throw new nl(tl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(wl.fromString.apply(wl,[t].concat(r)));return ov(o),new pv(e.firestore,e instanceof vv?e.converter:null,new _l(o))}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var mv=function(){return b((function e(){var t=this;w(this,e),this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new Wd(this,"async_queue_retry"),this.ou=function(){var e=Gd();e&&Wc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ho.$o()};var n=Gd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.ou)}),[{key:"isShuttingDown",get:function(){return this.eu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this._u(),this.au(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.eu){this.eu=!0,this.iu=e||!1;var t=Gd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ou)}}},{key:"enqueue",value:function(e){var t=this;if(this._u(),this.eu)return new Promise((function(){}));var n=new rl;return this.au((function(){return t.eu&&t.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Xa.push(e),t.uu()}))}},{key:"uu",value:(t=o(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Xa.length){e.next=14;break}return e.prev=1,e.next=4,this.Xa[0]();case 4:this.Xa.shift(),this.Ho.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Nl(e.t0)){e.next=12;break}throw e.t0;case 12:Wc("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Xa.length>0&&this.Ho.Qo((function(){return t.uu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"au",value:function(e){var t=this,n=this.Za.then((function(){return t.ru=!0,e().catch((function(e){var n,r;throw t.nu=e,t.ru=!1,Qc("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),e})).then((function(e){return t.ru=!1,e}))}));return this.Za=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this._u(),this.su.indexOf(e)>-1&&(t=0);var i=Sp.createAndSchedule(this,e,t,n,(function(e){return r.cu(e)}));return this.tu.push(i),i}},{key:"_u",value:function(){this.nu&&Jc()}},{key:"verifyOperationInProgress",value:function(){}},{key:"lu",value:(e=o(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Za,e.next=3,t;case 3:if(t!==this.Za){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"hu",value:function(e){var t,n=u(this.tu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.lu().then((function(){t.tu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=u(t.tu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.lu()}))}},{key:"Iu",value:function(e){this.su.push(e)}},{key:"cu",value:function(e){var t=this.tu.indexOf(e);this.tu.splice(t,1)}}]);var e,t}(),wv=function(e){function t(e,n,r,i){var a;return w(this,t),(a=f(this,t,[e,n,r,i])).type="firestore",a._queue=new mv,a._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]",a}return d(t,e),b(t,[{key:"_terminate",value:function(){return this._firestoreClient||bv(this),this._firestoreClient.terminate()}}])}(hv);function kv(e,t){var n="string"==typeof e?e:"(default)",r=$e("object"==h(e)?e:Ze(),"firestore").getImmediate({identifier:n});if(!r._initialized){var a=$("firestore");a&&fv.apply(void 0,[r].concat(i(a)))}return r}function bv(e){var t,n,r,i,a,o,s,u=e._freezeSettings(),c=(i=e._databaseId,a=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",o=e._persistenceKey,new Zl(i,a,o,(s=u).host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,rv(s.experimentalLongPollingOptions),s.useFetchStreams));e._firestoreClient=new $p(e._authCredentials,e._appCheckCredentials,e._queue,c),(null===(n=u.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=u.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var _v=function(){function e(t){w(this,e),this._byteString=t}return b(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Hl.fromBase64String(t))}catch(n){throw new nl(tl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}},{key:"fromUint8Array",value:function(t){return new e(Hl.fromUint8Array(t))}}])}(),Ev=function(){return b((function e(){w(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new nl(tl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bl(n)}),[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}])}(),Tv=b((function e(t){w(this,e),this._methodName=t})),Iv=function(){return b((function e(t,n){if(w(this,e),!isFinite(t)||t<-90||t>90)throw new nl(tl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new nl(tl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}),[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return pl(this._lat,e._lat)||pl(this._long,e._long)}}])}(),xv=/^__.*__$/,Sv=function(){return b((function e(t,n,r){w(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}),[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ff(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rf(e,this.data,t,this.fieldTransforms)}}])}();
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Av(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jc()}}var Cv=function(){function e(t,n,r,i,a,o){w(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.du(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return b(e,[{key:"path",get:function(){return this.settings.path}},{key:"Tu",get:function(){return this.settings.Tu}},{key:"Eu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Au",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.Vu(e),r}},{key:"mu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.du(),r}},{key:"fu",value:function(e){return this.Eu({path:void 0,Ru:!0})}},{key:"gu",value:function(e){return Vv(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"du",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}},{key:"Vu",value:function(e){if(0===e.length)throw this.gu("Document fields must not be empty");if(Av(this.Tu)&&xv.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}])}(),Dv=function(){return b((function e(t,n,r){w(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||$d(t)}),[{key:"wu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Cv({Tu:e,methodName:t,yu:n,path:bl.emptyPath(),Ru:!1,pu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}])}();function Nv(e){var t=e._freezeSettings(),n=$d(e._databaseId);return new Dv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ov(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.wu(a.merge||a.mergeFields?2:0,t,n,i);Rv("Data must be an object, but it was:",o,r);var s,c,l=Mv(r,o);if(a.merge)s=new ql(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){var h,f=[],d=u(a.mergeFields);try{for(d.s();!(h=d.n()).done;){var p=Fv(t,h.value,n);if(!o.contains(p))throw new nl(tl.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));jv(f,p)||f.push(p)}}catch(v){d.e(v)}finally{d.f()}s=new ql(f),c=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,c=o.fieldTransforms;return new Sv(new dh(l),s,c)}function Pv(e,t){if(Lv(e=ce(e)))return Rv("Unsupported field value:",t,e),Mv(e,t);if(e instanceof Tv)return function(e,t){if(!Av(t.Tu))throw t.gu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ru&&4!==t.Tu)throw t.gu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=u(e);try{for(a.s();!(n=a.n()).done;){var o=Pv(n.value,t.fu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ce(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return pf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=gl.fromDate(e);return{timestampValue:Yf(t.serializer,n)}}if(e instanceof gl){var r=new gl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Yf(t.serializer,r)}}if(e instanceof Iv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _v)return{bytesValue:Xf(t.serializer,e._byteString)};if(e instanceof pv){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.gu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:ed(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.gu("Unsupported field value: ".concat(uv(e)))}(e,t)}function Mv(e,t){var n={};return Fl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rl(e,(function(e,r){var i=Pv(r,t.Au(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Lv(e){return!("object"!=h(e)||null===e||e instanceof Array||e instanceof Date||e instanceof gl||e instanceof Iv||e instanceof _v||e instanceof pv||e instanceof Tv)}function Rv(e,t,n){if(!Lv(n)||("object"!=h(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=uv(n);throw"an object"===r?t.gu(e+" a custom object"):t.gu(e+" "+r)}var i}function Fv(e,t,n){if((t=ce(t))instanceof Ev)return t._internalPath;if("string"==typeof t)return function(e,t,n){if(t.search(Uv)>=0)throw Vv("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return v(Ev,i(t.split(".")))._internalPath}catch(Ua){throw Vv("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}(e,t);throw Vv("Field path arguments must be of type string or ",e,!1,void 0,n)}var Uv=new RegExp("[~\\*/\\[\\]]");function Vv(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new nl(tl.INVALID_ARGUMENT,s+e+u)}function jv(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Bv(e,t,n){e=cv(e,pv);var i=cv(e.firestore,wv),a=function(e,t){return e?e.toFirestore(t):t}(e.converter,t);return function(e,t){return function(e,t){var n=new rl;return e.asyncQueue.enqueueAndForget(o(r().mark((function i(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Np,r.next=3,nv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),i)})))),n.promise}(function(e){return e._firestoreClient||bv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}(e),t)}(i,[Ov(Nv(i),"setDoc",e._key,a,null!==e.converter,n).toMutation(e._key,Af.none())])}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Hc=Xe,Ge(new le("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new wv(new sl(e.getProvider("auth-internal")),new hl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new nl(tl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eh(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),et(qc,"4.2.0",e),et(qc,"4.2.0","esm2017")}();var zv=function(){function e(){w(this,e),_(this,"app",void 0),_(this,"analytics",void 0),_(this,"remoteConfig",void 0)}return b(e,[{key:"init",value:function(){var e=this,t=Je({apiKey:"AIzaSyBlR0QK--SjqMqihBd03ARBzfuZ3x1euzo",authDomain:"badamoyundixim.firebaseapp.com",databaseURL:"https://badamoyundixim.firebaseio.com",projectId:"badamoyundixim",storageBucket:"badamoyundixim.appspot.com",messagingSenderId:"532022495714",appId:"1:532022495714:web:2a3620b2f1f41d319fd1bb",measurementId:"G-8L1XP304KR"});this.app=t,this.analytics=zr(t),this.remoteConfig=
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return $e(e=ce(e),ta).getImmediate()}(t);var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return $e(e=ce(e),"performance").getImmediate()}(t);window.firebasePerformanceTrace=function(e){return function(e,t){return e=ce(e),new Gi(e,t)}(n,e)},window.reportToFirebase=function(t,n){e.reportToFirebase(t,n)}}},{key:"reportToFirebase",value:(i=o(r().mark((function e(t,n){var i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={},Object.keys(n).forEach((function(e){i[e]=n[e]||""})),i.time=gl.fromDate(new Date(xa(l.getSysTs()).valueOf())),a=kv(this.app),o=yv(gv(a,t)),e.next=8,Bv(o,i);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e,t){return i.apply(this,arguments)})},{key:"reportEvent",value:(n=o(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.analytics&&(console.log("zeze",t,this.analytics),qr(this.analytics,t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"getValueFromConfig",value:(t=o(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.remoteConfig){e.next=5;break}return e.next=3,_a(this.remoteConfig);case 3:return n=la(this.remoteConfig,t),e.abrupt("return",n.asString());case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]);var t,n,i}();_(zv,"instance",void 0);var qv=function(e){return e["上次的充值金额"]="last_pay_amount",e["上次的支付子方式"]="last_pay_type_2",e["上次成功支付子方式"]="last_success_pay_type_2",e["上次的支付订单"]="last_pay_order_id",e["本地Skey"]="sawa_ow_skey",e["上次的支付卡"]="sawa_ow_pay_card",e["上次成功的支付卡"]="sawa_ow_success_pay_card",e["充值对象uid"]="sawa_ow_to_uid",e["历史充值对象列表"]="sawa_ow_recharge_user_history_list",e["本地登录用户"]="sawa_ow_login_user",e["充值对象"]="sawa_ow_to_user",e["显示模拟支付的PageVid"]="mock_detected_by_pageVid",e["上次使用过的API_BASE"]="sawa_ow_last_use_api_base",e["上次使用过的神策域名"]="sawa_ow_last_use_sensors_base",e["备用apilist"]="sawa_ow_backup_api_list",e["备用神策list"]="sawa_ow_backup_sensors_list",e.NANO_ID_KEY="isawa_official_website_nanoid_3",e.LOGIN_TICKET_KEY="isawa_website_login_ticket_2",e.LOGIN_TYPE_KEY="isawa_website_login_type_2",e.whiteListKey="cko_new_white_list_key",e}(qv||{});var Kv=function(){var e=g({});function t(t){var n=e.value[t];if(!n){var r=localStorage.getItem(String(t));try{if(r)return n=JSON.parse(decodeURIComponent(atob(r))),e.value[t]=n,n}catch(i){}return null}return n}function n(t,n){try{var r=btoa(encodeURIComponent(JSON.stringify(n)));localStorage.setItem(String(t),r),e.value[t]=n}catch(i){}}return function(){return{get:t,set:n}}}();!function(){var e=g({});function t(t){var n=e.value[t];if(!n){var r=sessionStorage.getItem(String(t));try{if(r)return JSON.parse(decodeURIComponent(atob(r))),e.value[t]=n,n}catch(i){}return null}return n}function n(t,n){try{var r=btoa(encodeURIComponent(JSON.stringify(n)));sessionStorage.setItem(String(t),r),e.value[t]=n}catch(i){}}}();var Hv="domain-dial";function Gv(e,t){return $v.apply(this,arguments)}function $v(){return $v=o(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e(n)}),t)})));case 1:case"end":return e.stop()}}),e)}))),$v.apply(this,arguments)}function Wv(e){return Qv.apply(this,arguments)}function Qv(){return Qv=o(r().mark((function e(t){var n,i=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:5e3,e.abrupt("return",Promise.race([Gv(n,null),t]));case 2:case"end":return e.stop()}}),e)}))),Qv.apply(this,arguments)}function Yv(){return Xv.apply(this,arguments)}function Xv(){return(Xv=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wv(zv.getInstance().getValueFromConfig("ow_conf")));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Jv=5e3;function Zv(e,t){return eg.apply(this,arguments)}function eg(){return eg=o(r().mark((function e(t,n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Promise((function(e){for(var r=function(){var r=t[i];2===n?tg(r).then((function(t){t&&e(r)})):1===n&&rg(r).then((function(t){t&&e(r)}))},i=0;i<t.length;i+=1)r()})),a=new Promise((function(e){return setTimeout((function(){e("")}),Jv)})),e.abrupt("return",Promise.race([i,a]));case 3:case"end":return e.stop()}}),e)}))),eg.apply(this,arguments)}function tg(e){return ng.apply(this,arguments)}function ng(){return(ng=o(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.get("https://".concat(t,"/api/sys/h5_info"),{});case 2:return n=e.sent,e.abrupt("return",n[0]?t:"");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rg(e){return ig.apply(this,arguments)}function ig(){return(ig=o(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.get("https://".concat(t,"/api/gm/hii"),{});case 2:return n=e.sent,e.abrupt("return",n[0]?t:"");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ag(e,t){return og.apply(this,arguments)}function og(){return(og=o(r().mark((function e(t,n){var i,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Kv(),2!==n){e.next=8;break}return e.next=4,Zv(t,2);case 4:(a=e.sent)?(i.set(qv.上次使用过的API_BASE,a),y("https://".concat(a,"/"))):console.error("dial api timeout"),e.next=13;break;case 8:if(1!==n){e.next=13;break}return e.next=11,Zv(t,1);case 11:(o=e.sent)?(console.log("神策res",o,qv.上次使用过的神策域名),i.set(qv.上次使用过的神策域名,o)):console.error("dial api timeout");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sg(e,t){var n=[];return e&&n.push(ag(e,2)),t&&n.push(ag(t,1)),Promise.all(n)}function ug(){return cg.apply(this,arguments)}function cg(){return(cg=o(r().mark((function e(){var t,n,i,a,o,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Kv(),zv.getInstance().init(),e.next=4,Yv();case 4:if(n=e.sent,console.log("conf",n),!n){e.next=18;break}return i=JSON.parse(n),a=i.go_pk,o=i.se,console.log(Hv,"conf",a,o),t.set(qv.备用apilist,a),t.set(qv.备用神策list,o),e.next=15,sg(a,o);case 15:case 22:return e.abrupt("return",!0);case 18:return s=t.get(qv.备用apilist),u=t.get(qv.备用神策list),e.next=22,sg(s,u);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lg={VUE_APP_ENV:"production",VUE_APP_BASE_URL:"https://arab-pk.badambiz.com/",VUE_APP_ENABLE_FONT_SPTU:"true",VUE_APP_LANGUAGE:"阿拉伯语",VUE_APP_PUBLIC_PATH:"./",VUE_APP_TRANSLATE_SHEET:"2512sawa挑战赛2.0",VUE_APP_ENABLE_SPTU:"true",VUE_APP_EXTERNALS:"",VUE_APP_FLAVOR:"",VUE_APP_VERSION:"0.0.0"};function hg(e){var t=Object.assign({},{onlyFirst:!1,onlyOnce:!1},e||{});t.onlyFirst&&t.onlyOnce&&console.error({err:"utils:onlyFirst和onlyOnce不能同时为true"});var n,a,s=[],u=new Map,c=0,l=!1,h=!1;return{race:function(e){var n=this;return o(r().mark((function i(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.onlyFirst){r.next=2;break}return r.abrupt("return",n.raceFirst(e));case 2:if(!t.onlyOnce){r.next=4;break}return r.abrupt("return",n.raceOnce(e));case 4:return r.abrupt("return",n.raceNormal(e));case 5:case"end":return r.stop()}}),i)})))()},raceNormal:function(e){var t=this;return o(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s.push.apply(s,i(e)),a=new Promise((function(e,n){c+=1,u.set(c,{resolve:e,reject:n}),t.raceFunc(c)})),n.abrupt("return",a);case 3:case"end":return n.stop()}}),n)})))()},raceFunc:function(e){return o(r().mark((function t(){var n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.map((function(e){return e()})),t.next=3,Promise.race(n).catch((function(e){return console.error(e)}));case 3:void 0!==(i=t.sent)&&(s.splice(0,s.length),Array.from(u.keys()).forEach((function(t){var n=u.get(t);n&&(t===e?n.resolve(i):n.reject("utils:racer竞争失败, success id: ".concat(e,", fail id: ").concat(t)))})));case 5:case"end":return t.stop()}}),t)})))()},raceFirst:function(e){var t=this;return o(r().mark((function a(){var o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l){r.next=8;break}return s.push.apply(s,i(e)),o=new Promise((function(e,n){c+=1,u.set(c,{resolve:e,reject:n}),t.raceFunc2(c)})),n=o,l=!0,r.abrupt("return",o);case 8:return r.abrupt("return",n);case 9:case"end":return r.stop()}}),a)})))()},raceFunc2:function(e){return o(r().mark((function t(){var n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.map((function(e){return e()})),t.next=3,Promise.race(n).catch((function(e){return console.error(e)}));case 3:void 0!==(i=t.sent)?(s.splice(0,s.length),Array.from(u.keys()).forEach((function(t){var n=u.get(t);n&&(t===e?n.resolve(i):(console.warn("h5_pay_page_show",888),n.reject("utils:racer竞争失败, success id: ".concat(e,", fail id: ").concat(t))))}))):(s.splice(0,s.length),l=!1);case 5:case"end":return t.stop()}}),t)})))()},raceOnce:function(e){var t=this;return o(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s.push.apply(s,i(e)),a=new Promise((function(e,n){c+=1,u.set(c,{resolve:e,reject:n}),t.raceFunc3(c)})),n.abrupt("return",a);case 3:case"end":return n.stop()}}),n)})))()},raceFunc3:function(e){return o(r().mark((function t(){var n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.map((function(e){return e()})),t.next=3,Promise.race(n).catch((function(e){return console.error(e)}));case 3:void 0!==(i=t.sent)&&(s.splice(0,s.length),h?Array.from(u.keys()).forEach((function(e){var t=u.get(e);t&&t.reject("utils:racer 已经有成功过的了, success id: ".concat(a,", fail id: ").concat(e))})):(h=!0,Array.from(u.keys()).forEach((function(t){var n=u.get(t);n&&(t===e?(a=e,n.resolve(i)):n.reject("utils:racer once竞争失败, success id: ".concat(e,", fail id: ").concat(t)))}))));case 5:case"end":return t.stop()}}),t)})))()}}}var fg=g("https://sawa-sa-proxy.badambiz.com:10443/sa");function dg(){var e=hg({onlyFirst:!0});function t(){return n.apply(this,arguments)}function n(){return n=o(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ug();case 2:return t=e.sent,i.isInit=t,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}var i={isInit:!1,exec:function(){return o(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.race([t]));case 1:case"end":return n.stop()}}),n)})))()}};return i}var pg,vg="sawa_ow_",gg=((pg=gg||{})["上次的充值金额"]="last_pay_amount",pg["上次的支付子方式"]="last_pay_type_2",pg["上次成功支付子方式"]="last_success_pay_type_2",pg["上次的支付订单"]="last_pay_order_id",pg["本地Skey"]="".concat(vg,"skey"),pg["上次的支付卡"]="".concat(vg,"pay_card"),pg["上次成功的支付卡"]="".concat(vg,"success_pay_card"),pg["充值对象uid"]="".concat(vg,"to_uid"),pg["历史充值对象列表"]="".concat(vg,"recharge_user_history_list"),pg["本地登录用户"]="".concat(vg,"login_user"),pg["充值对象"]="".concat(vg,"to_user"),pg["显示模拟支付的PageVid"]="mock_detected_by_pageVid",pg["上次使用过的API_BASE"]="".concat(vg,"last_use_api_base"),pg["上次使用过的神策域名"]="".concat(vg,"last_use_sensors_base"),pg["备用apilist"]="".concat(vg,"backup_api_list"),pg["备用神策list"]="".concat(vg,"backup_sensors_list"),pg["登录类型"]="".concat(vg,"login_type"),pg.NANO_ID_KEY="isawa_official_website_nanoid_3",pg.LOGIN_TICKET_KEY="isawa_website_login_ticket_2",pg.LOGIN_TYPE_KEY="isawa_website_login_type_2",pg.whiteListKey="cko_new_white_list_key",pg),yg=location.origin+"/";var mg=function(){var e=hg({onlyFirst:!0});function t(){return n.apply(this,arguments)}function n(){return n=o(r().mark((function e(){var t,n,o,s,u,c,h,f=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]&&f[0],console.log("zeze"),e.next=4,dg().exec();case 4:return n=Kv(),(o=n.get("sawa_ow_last_use_sensors_base"))&&(fg.value="https://".concat(o,"/sa")),s=U.getEnable(),u=new URL("./sensorsdata.min.js",yg).href,console.log("initWebSensorsSdk",fg.value,u,lg),c={datasend_timeout:6e3,send_interval:2e3,storage_length:200},h=!!t&&c,e.next=17,l.initWebSensors("sawa_saudi",s,"ajax",fg.value,u,{app_js_bridge:false,batch_send:h,max_string_length:1200});case 17:if(a.isInit=!0,!window.sensors){e.next=24;break}return window.sensors.on("dataSendSuccess",(function(e){var t=window.firebasePerformanceTrace;if(t){var n=t("sensors_send_success");n.start(),n.putAttribute("result","1"),n.stop()}i(e)})),window.sensors.on("dataSendFail",(function(e){var t=window.firebasePerformanceTrace;if(t){var n=t("sensors_send_success");n.start(),n.putAttribute("result","0"),n.stop()}i(e,!0)})),e.abrupt("return",!0);case 24:return e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=l.getDayJs(l.getSysTs()).valueOf();Number(l.getDayJs(n).format("YYYYMMDD"));var r=null==e?void 0:e.data,i=[];try{i=r.filter((function(e){var t;return!(null==e||null===(t=e.properties)||void 0===t||!t.s_event_uuid)})).map((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.s_event_uuid}))}catch(o){var a;i=[null==r||null===(a=r.properties)||void 0===a?void 0:a.s_event_uuid].filter((function(e){return!!e}))}console.log(t?"data send fail":"data send success",e,i),i&&i.length}var a={isInit:!1,exec:function(){return o(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.race([t]));case 1:case"end":return n.stop()}}),n)})))()}};return a}(),wg=[A('<div class="show"><div class="flex-wrap"><div id="J-text" class="text" dir="auto"></div></div></div><div class="download-wrap"><div id="J-download-btn" class="download-btn"></div></div>',2)],kg=k({__name:"index",setup:function(e){var t,n=(t=new(window.webkitURL||window.URL)(location.href),{nickname:decodeURIComponent(t.searchParams.get("nickname")||""),invite_code:t.searchParams.get("invite_code")||"",isOutBrowser:!!t.searchParams.get("isOutBrowser")}),i=l._T("{name}邀请你到Sawa play参与Carrom挑战赛瓜分{num}沙特里亚尔奖金，通过邀请链接下载，使用非游客注册成功后，即可参与并领取新人大礼包").replace("{num}",'<span class="highlight">20000</span>').replace("{name}",n.nickname);return E(o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mg.exec();case 2:console.log("神策初始化完毕"),document.getElementById("J-text").innerHTML=i,document.getElementById("J-download-btn").addEventListener("click",o(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.reportWebSensors("h5_new_user_invite_click",{h5_deviceid:l.api.getUUid(),activity:T,invite_code:n.invite_code,element:"点击下载"}),e.next=3,I(200);case 3:t="https://ludoios.onelink.me/X3f2?af_xp=custom&pid=operation_new%20user&is_retargeting=true&af_reengagement_window=30d&c=operation_new%20user&invite_code="+n.invite_code,location.href=t;case 5:case"end":return e.stop()}}),e)})))),l.reportWebSensors("h5_new_user_invite_show",{h5_deviceid:l.api.getUUid(),activity:T,invite_code:n.invite_code});case 6:case"end":return e.stop()}}),e)})))),function(e,t){return S(),x("div",null,wg)}}});function bg(){return _g.apply(this,arguments)}function _g(){return(_g=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mg.exec();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}"zh"!==l.getArgsFromUrlHash("lan")?l.setLang(C):l.setLang({},"",!0),l.exec(o(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bg(),l.DayJs.setOffset(l.TimeType.Ksa),l.calculateWindow(750),t=D(kg);try{l.getPlatform().isIPhone&&window.screen.width>=430&&(document.documentElement.style.width="751px")}catch(n){console.error(n)}t.mount("#app");case 6:case"end":return e.stop()}}),e)}))))}}}))}();
